---
paths:
  - "**/*"
---

# 最新ベストプラクティス採用方針

> [ベストプラクティス起点](../../CLAUDE.md#共通アプローチ-ベストプラクティス起点) の技術・ツール領域での具体化。

このプロジェクトでは、その時点での安定した最新のベストプラクティスを積極的に採用する。

## 方針

### 1. 依存関係のバージョン

| 優先順位 | 基準 | 例 |
|----------|------|-----|
| 1 | LTS（Long Term Support）があれば LTS | Node.js LTS |
| 2 | LTS がなければ最新の stable | Rust stable |
| 3 | experimental / beta / RC は採用しない | — |

補足:
- セキュリティ修正が含まれる場合はマイナーバージョンアップを優先
- メジャーバージョンアップは breaking changes を確認してから判断

### 2. 言語のイディオム・構文

各言語の最新の推奨イディオム・構文を採用する。

| 言語 | 採用スタイル |
|------|-------------|
| Rust | ファイル名でモジュール定義（Rust 2018+） |
| Rust | `extern crate` 宣言は不要（Rust 2018+） |
| Elm | `elm-community/json-extra` を活用 |

判断基準:
- 公式ドキュメントで推奨されているか
- 主要なライブラリ・フレームワークで採用されているか
- IDE / ツールのサポートが充実しているか

### 3. ライブラリ・フレームワークの API

ライブラリの最新の推奨 API を使用する。

| カテゴリ | 採用基準 |
|----------|---------|
| 非推奨 API | `#[deprecated]` の代替として示された新 API を使用 |
| パターン | 現行バージョンの推奨 API を使用 |
| ヘルパー | ライブラリ提供の関数があれば手動実装より優先 |

例（Rust）:
```rust
// 古い: 手動でイテレート
let mut result = Vec::new();
for item in items {
    if let Some(v) = item.value() {
        result.push(v);
    }
}

// 新しい: filter_map を活用
let result: Vec<_> = items.iter().filter_map(|item| item.value()).collect();
```

判断基準:
- ライブラリの公式ドキュメント・CHANGELOG で推奨されているか
- `#[deprecated]` や compiler warning が出ていないか
- より簡潔・安全・効率的な代替があるか

### 4. 標準仕様の参照

RFC、W3C 勧告などの標準仕様を参照する際は、最新の有効な仕様番号を使用する。

| 状態 | 対応 |
|------|------|
| 後継仕様で obsoleted | 後継仕様の番号を使用 |
| 後継仕様で updated | 後継仕様を確認し、必要に応じて更新 |
| 現行（active） | そのまま使用 |

例:

| 古い参照 | 新しい参照（採用） | 理由 |
|---------|-------------------|------|
| RFC 7807 | RFC 9457 | 2023年7月に obsoleted |

新しい仕様を参照する際は、IETF Datatracker 等で最新状態を確認する。

改善の経緯: [廃止済み RFC 番号の採用](../../prompts/improvements/2026-02/2026-02-06_2110_廃止済みRFC番号の採用.md)

### 5. ツール・ライブラリの選定

新しいツールやライブラリを導入する際は、以下を確認する:

1. 成熟度: v1.0 以上、または十分な採用実績
2. メンテナンス状況: 最近のコミット、Issue への対応
3. エコシステムとの整合: 既存の技術スタックとの相性
4. ドキュメントの充実度: 学習・トラブルシューティングが容易か

## 更新のタイミング

- 新機能実装時: 関連する最新プラクティスを調査してから実装
- 依存関係の更新時: breaking changes と新機能を確認
- 定期的なレビュー: 半年〜1年ごとにプラクティスの見直し

## AI エージェントへの指示

コードを実装・レビューする際:

1. 古いイディオムを見つけたら、新しいスタイルへの移行を提案する
2. 依存関係を追加する際は、最新の stable バージョンを使用する
3. 非推奨（deprecated）な API の使用を避ける
4. 新しいプラクティスを採用した場合は、なぜそれが良いのか簡潔に説明する
5. 標準仕様（RFC 等）を参照する際は、その仕様が現行か確認する

「最新」は安定性・信頼性を確保した上での最新を指す。experimental / beta / RC は対象外。

## 参照

- Rust のルール: [rust.md](rust.md)
- フロントエンドのルール: [frontend.md](frontend.md)
