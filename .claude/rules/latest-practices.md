---
paths:
  - "**/*"
---

# 最新ベストプラクティス採用方針

このプロジェクトでは、その時点での安定した最新のベストプラクティスを積極的に採用する。

## 背景と目的

技術は常に進化しており、より良いパターンや構文が登場する。このプロジェクトでは:

1. 学習効果の最大化: 最新の推奨プラクティスを学ぶことで、他のプロジェクトでも活かせる知識を得る
2. 技術的負債の予防: 古いパターンを避けることで、将来のマイグレーションコストを削減
3. エコシステムとの整合: 最新のツール・ライブラリは新しいプラクティスを前提に設計されている

## 方針

### 1. 依存関係のバージョン

| 優先順位 | 基準 | 例 |
|----------|------|-----|
| 1 | LTS（Long Term Support）があれば LTS | Node.js LTS |
| 2 | LTS がなければ最新の stable | Rust stable |
| 3 | experimental / beta / RC は採用しない | — |

補足:
- セキュリティ修正が含まれる場合はマイナーバージョンアップを優先
- メジャーバージョンアップは breaking changes を確認してから判断

### 2. 言語のイディオム・構文

言語の進化に伴い、より良いイディオムや構文が登場した場合は積極的に採用する。

| 言語 | 古いスタイル | 新しいスタイル（採用） |
|------|-------------|----------------------|
| Rust | `mod.rs` でモジュール定義 | ファイル名でモジュール定義（Rust 2018+） |
| Rust | `extern crate` 宣言 | 不要（Rust 2018+） |
| Elm | `Json.Decode.Pipeline` 手動実装 | `elm-community/json-extra` 活用 |

判断基準:
- 公式ドキュメントで推奨されているか
- 主要なライブラリ・フレームワークで採用されているか
- IDE / ツールのサポートが充実しているか

### 3. ライブラリ・フレームワークの API

ライブラリが提供する関数・構造体・トレイトについても、最新の推奨 API を使用する。

| カテゴリ | 避けるべき | 採用すべき |
|----------|-----------|-----------|
| 非推奨 API | `#[deprecated]` が付いた関数 | 代替として示された新 API |
| 古いパターン | ライブラリの旧バージョン互換 API | 現行バージョンの推奨 API |
| 便利関数 | 冗長な手動実装 | ライブラリ提供のヘルパー関数 |

例（Rust）:
```rust
// 古い: 手動でイテレート
let mut result = Vec::new();
for item in items {
    if let Some(v) = item.value() {
        result.push(v);
    }
}

// 新しい: filter_map を活用
let result: Vec<_> = items.iter().filter_map(|item| item.value()).collect();
```

判断基準:
- ライブラリの公式ドキュメント・CHANGELOG で推奨されているか
- `#[deprecated]` や compiler warning が出ていないか
- より簡潔・安全・効率的な代替があるか

### 4. ツール・ライブラリの選定

新しいツールやライブラリを導入する際は、以下を確認する:

1. 成熟度: v1.0 以上、または十分な採用実績
2. メンテナンス状況: 最近のコミット、Issue への対応
3. エコシステムとの整合: 既存の技術スタックとの相性
4. ドキュメントの充実度: 学習・トラブルシューティングが容易か

## 更新のタイミング

- 新機能実装時: 関連する最新プラクティスを調査してから実装
- 依存関係の更新時: breaking changes と新機能を確認
- 定期的なレビュー: 半年〜1年ごとにプラクティスの見直し

## AI エージェントへの指示

コードを実装・レビューする際:

1. 古いイディオムを見つけたら、新しいスタイルへの移行を提案する
2. 依存関係を追加する際は、最新の stable バージョンを使用する
3. 非推奨（deprecated）な API の使用を避ける
4. 新しいプラクティスを採用した場合は、なぜそれが良いのか簡潔に説明する

注意: 「最新」は「実験的」を意味しない。安定性・信頼性を確保した上での最新を選択する。

## 参照

- Rust のルール: [rust.md](rust.md)
- フロントエンドのルール: [frontend.md](frontend.md)
