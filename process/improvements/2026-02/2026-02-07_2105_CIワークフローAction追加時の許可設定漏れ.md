# CI ワークフロー Action 追加時の許可設定漏れ

## 事象

Issue #289 で `EmbarkStudios/cargo-deny-action@v2` を CI ワークフローに追加したが、GitHub リポジトリの Actions 許可設定（ホワイトリスト）への追加を忘れた。CI が `startup_failure` で失敗した。

## 原因分析

- ナレッジベース（`docs/06_ナレッジベース/devtools/GitHubActions.md`）に許可設定の一覧と「許可設定のデバッグ」手順が文書化されていた
- しかし、CI ワークフローに新しい Action を追加する際に「許可設定を確認する」という導線がルールファイルに存在しなかった
- 情報はあったが、「いつ参照すべきか」が実装フローに組み込まれていなかった

根本原因: 知識の存在と、その知識を適切なタイミングで参照する仕組みは別物である。ナレッジベースは参照資料であり、実装時の必須チェック項目として機能するにはルールファイルへの組み込みが必要。

## 対策

CLAUDE.md に「CI ワークフロー変更時の必須対応」を追加する。（Issue #297）

## 次のアクション

- [x] CLAUDE.md に CI ワークフロー変更時のルールを追加（Issue #297）
- [x] ナレッジベースの許可設定テーブルに `EmbarkStudios/cargo-deny-action@*` を追加済み
- [ ] GitHub Settings で許可パターンを追加（手動）

## 分類

- カテゴリ: 知識-実行乖離
- 失敗タイプ: プロセスギャップ
- 問題の性質: プロセス的

## 検証（対策実行後に追記）

- 実施日: 2026-02-11
- 対策の実行状況: 実行済み
- 効果: CLAUDE.md に「CI ワークフロー変更時の必須対応」セクションが追加され（#297）、ナレッジベースの許可設定テーブルも更新された。以降の CI 変更では許可設定の確認が手順に含まれている
- 備考: GitHub Settings の許可パターン追加はリポジトリ管理者による手動対応が必要
