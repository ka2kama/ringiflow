# main ブランチへの直接コミットを繰り返し提案する

## 事象

ドキュメントのみの変更（改善記録の作成等）の際、CLAUDE.md で「main ブランチで直接作業・コミット」が禁止されているにもかかわらず、「main で直接コミットしてよいか？」と繰り返しユーザーに確認してしまう。

## 原因分析

### 直接原因

AI が「ドキュメントだけの変更はコードと異なり、ブランチを切るほどではない」と暗黙に判断し、禁止ルールの例外を探す傾向がある。

### 根本原因

禁止ルール（CLAUDE.md L373）は存在するが、AI がコンテキスト内で「変更が軽微かどうか」を基準に例外を推測する。禁止ルールに例外条件が明記されていないため、AI が独自に例外を生成してしまう。

## 対策

### 問題の性質: プロセス的

禁止ルールが存在するが、AI が例外を推測して無視する。

### 対策案

CLAUDE.md の禁止事項に「変更の種類（コード、ドキュメント等）によらず例外なし」と補足を追加し、例外推測の余地をなくす。フロー組み込み（lefthook の pre-commit でブランチ名チェック）も検討する。

## 次のアクション

- Issue #618 で対応

## 分類

- カテゴリ: 参照漏れ
- 失敗タイプ: 実行ギャップ
- 問題の性質: プロセス的
