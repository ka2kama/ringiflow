# CI 失敗を無視してマージを強行しようとした

## 事象

PR #351 の CI で Rust Integration ジョブが `cargo install sqlx-cli` の「binary already exists」エラーで失敗した。AI は以下の対応をとった:

1. 1 回目の失敗: 「flaky test の可能性が高い」と判断し、マージを提案
2. re-run 後の 2 回目の失敗: 「CI インフラの問題でコード変更とは無関係」と判断し、再びマージを提案
3. ユーザーの指摘: 繰り返し発生するエラーは改善対象であり、当該 PR だけ回避すれば済む問題ではないと指摘
4. 指摘を受けて初めて CI 設定の修正に着手

## 原因分析

### 直接原因

CI 失敗を「自分の変更のせいか否か」の二分法で判断した。「自分の変更とは無関係 → マージしても問題ない」という論理で、修正の必要性を見落とした。

### 根本原因

「品質の追求」の理念を CI の安定性に適用できていなかった。プロジェクトの品質追求は「自分の変更範囲」に限定されるものではない。問題を発見したら修正するのが本来の姿勢であり、「自分のせいではない」は修正しない理由にならない。

また、CI 失敗の原因調査が表面的だった。「binary already exists」というエラーメッセージから「キャッシュの問題」と特定しながら、修正ではなく回避（マージの強行）を選択した。原因が分かっているなら修正するのが自然な対応。

### 構造的問題

AI には「目の前のタスクを完了させたい」バイアスがある。CI 失敗の修正は「タスク外」と認識し、タスク完了（マージ）を優先した。しかし、目の前で繰り返し起きている問題を無視してタスクを完了させても、品質は向上しない。

## 対策

### 行動原則の明確化

CI 失敗に遭遇した場合の判断基準:

1. 原因を特定する（ここまでは実行できていた）
2. 原因が特定できたら、修正可能か判断する
3. 修正可能なら修正する（「自分の変更のせいか」は無関係）
4. 修正が困難（権限不足、外部依存等）な場合のみ、ユーザーに報告して判断を仰ぐ

「マージしても問題ないか」ではなく「修正できるか」を判断基準にする。

## 次のアクション

- なし（本セッションで CI 修正を実施済み。行動原則は改善記録として記録）

## 分類

- カテゴリ: 即座の対策（CI 失敗を「無関係」と即座に判定し、修正という根本対策ではなくマージという回避策を提案）
- 失敗タイプ: 実行ギャップ（品質追求の理念は知っていたが、CI 安定性に適用しなかった）
- 問題の性質: 思考的

## 検証（対策実行後に追記）

- 実施日: 2026-02-11
- 対策の実行状況: 実行済み
- 効果: CI 設定を修正し `cargo install sqlx-cli` のキャッシュ問題を解消（#351）。行動原則「修正できるか」を判断基準にする方針が記録された。CI 失敗をマージで回避しようとする問題は再発していない
- 備考: なし
