# 改善記録作成時の自己チェック省略

## 事象

改善記録「ユーザー確認なしに破壊的操作を実行した」を作成した際、docs.md の「ドキュメント生成時の自己チェック」を実施せず、文体規約に違反した状態で提出した。

問題点:
- ユーザーの発言を直接引用（サニタイズ不足）
- 会話の流れを詳細に記述（コンテキスト独立性の欠如）

ユーザーからの指摘を受けて修正した。

## 原因分析

### 表層的な原因

改善記録を作成する際、docs.md の自己チェックリストを参照・実行しなかった。

### 根本原因

docs.md には既にドキュメント生成時の自己チェックが定義されており、文体整合・サニタイズのチェック項目が含まれている。しかし、改善記録作成時にこのチェックリストを実行するプロセスが形式知化されていない。

**既存の自己チェック（docs.md）:**

| # | チェック項目 | 確認内容 |
|---|------------|---------|
| 1 | コンテキスト独立性 | 会話の文脈を知らない読者が読んでも意味が通るか |
| 3 | サニタイズ | ユーザーの発言が技術的内容に要約されているか（直接引用を避ける） |
| 4 | 文体整合 | 対象ファイルの文体規約に従っているか |

これらは存在するが、改善記録作成のワークフローに組み込まれていない。

類似事例: [ルールファイル追記時の文体規約違反](2026-02-09_2117_ルールファイル追記時の文体規約違反.md)（#353）で同種の問題が発生し、docs.md に自己チェックが追加された。しかし、その後も実行されていない。

## 対策

### 恒久対策

改善記録作成時のワークフローに自己チェックを組み込む。

**改善記録 README.md に追加:**

改善記録を作成したら、コミット前に以下を確認する:

| # | チェック項目 | 確認内容 |
|---|------------|---------|
| 1 | サニタイズ | ユーザーの発言を直接引用していないか |
| 2 | コンテキスト独立性 | 会話の流れではなく、事実ベースの記述になっているか |
| 3 | 文体整合 | 客観的・簡潔な記述になっているか（語りかけ調の排除） |

→ 詳細: `.claude/rules/docs.md` の「ドキュメント生成時の自己チェック」

Issue #550

### 暫定対策（即時適用）

改善記録を Write した直後、コミット前に docs.md の自己チェックリストを目視確認する。

## 次のアクション

- 改善記録 README.md に自己チェックのリマインダーを追加する Issue を作成
- 暫定対策として、改善記録作成後は必ず docs.md を参照する

## 分類

- カテゴリ: 参照漏れ
- 失敗タイプ: 実行ギャップ
- 問題の性質: プロセス的
