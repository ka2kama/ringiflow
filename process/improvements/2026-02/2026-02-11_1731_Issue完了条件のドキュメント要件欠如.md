# Issue 完了条件のドキュメント要件欠如

## 事象

Phase 2-2（Epic #403）の 4 つの Story（#428-431）を 1 つの PR（#426）で実装した際、各 Story 完了時にセッションログと実装解説が作成されなかった。最終的に wrap-up 時に実装解説 8 ファイルの欠如が発覚し、事後的にまとめて作成した。

## 原因分析

### 直接原因

各 Story の完了条件にドキュメント要件（セッションログ、実装解説）が含まれていなかった。完了条件が技術的基準と E2E 基準のみで構成されており、ドキュメントは暗黙的に「後で対応」とされた。

### 構造的原因

CLAUDE.md の「ドキュメント自動作成ルール」にはセッションログ・実装解説の作成要件が記載されている。しかし、この要件が以下の検証ポイントに組み込まれていない:

1. Issue の完了基準テンプレート — 技術的基準と E2E 基準のみ。ドキュメント基準がない
2. 品質チェックリストの「設計・ドキュメント」セクション — 詳細設計書、OpenAPI、ADR のみ。セッションログ・実装解説が含まれていない

結果として、CLAUDE.md にルールが存在しても、Story 完了の検証プロセスでチェックされず、実効性がなかった。

### 悪化要因

1 Epic = 1 PR の構成により、Story が 4 つ連続で実装された。Story 単独では PR 完了フローの品質ゲートを通過しないため、ドキュメント作成の検証機会が PR 完了時の 1 回に集約された。

## 対策

品質チェックリストの「設計・ドキュメント」セクションにドキュメント要件を追加する（成果物要件形式）:

```markdown
設計・ドキュメント:
- [ ] 詳細設計書が作成・更新されているか（`docs/40_詳細設計書/`）
- [ ] API を含む場合、OpenAPI 仕様書が更新されているか（`openapi/`）
- [ ] 技術選定・設計判断があれば ADR が作成されているか（`docs/70_ADR/`）
- [ ] 設計判断を伴う実装があれば実装解説が作成されているか（`docs/90_実装解説/`）
- [ ] コード変更・設計判断があればセッションログが作成されているか（`prompts/runs/`）
```

これにより、PR 完了フローの品質ゲート（最後の砦）で構造的にチェックされる。

加えて、wrap-up の Step 5（計画ファイルのリネーム前）で品質チェックリストのドキュメント項目との突合を行うステップを追加することで、wrap-up 自体の網羅性も向上する。

→ Issue #446

## 次のアクション

1. 品質チェックリスト（`docs/60_手順書/04_開発フロー/01_Issue駆動開発.md`）の「設計・ドキュメント」セクションを更新
2. wrap-up スキルに品質チェックリストとの突合ステップを追加検討（任意）

## 分類

- カテゴリ: 知識-実行乖離
- 失敗タイプ: プロセスギャップ
- 問題の性質: プロセス的
