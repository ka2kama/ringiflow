# 計画ファイルのランダム名リネーム漏れが構造的に防止されていない

## 事象

PR #929（2026-02-26 マージ）で、計画ファイル `prompts/plans/golden-booping-metcalfe.md` がランダム名のままコミット・マージされた。`/wrap-up` Step 4 にリネームチェックが存在するが、実行されなかったか見落とされた。

同種の問題はユーザーから繰り返し指摘されている。

## 原因分析

### 直接原因

`/wrap-up` 実行時のリネームチェックが省略されたか、`/wrap-up` 自体が実行されなかった。

### 根本原因

計画ファイルのリネームは `/wrap-up` Step 4 の手動チェックに依存しており、構造的な強制がない。AI エージェントの記憶やスキル実行の網羅性に頼る仕組みは再発リスクが高い。

既存の対策（`/wrap-up` Step 4）は行動規範形式であり、フロー組み込み（自動検出）への転換が行われていない。

## 対策

### 問題の性質: プロセス的

スキル（`/wrap-up`）内のチェックステップが構造的に強制されていない。

### 対策案

lefthook の pre-commit フックで `prompts/plans/` 配下のランダム名ファイルを検出してブロックする（フロー組み込み形式）。

検出ロジック: ファイル名が `数字` または `README` で始まらないファイルがステージされていればエラーとする。命名規則（`{Issue番号}_{トピック}.md` または `YYYYMMDD_{トピック}.md`）に合致しないファイルのコミットを防止する。

既存のパターン: `scripts/check/` 配下に `sanitize-improvements.sh` 等の検証スクリプトがあり、lefthook から呼び出す仕組みが確立済み。同じパターンで `check-plan-filenames.sh` を追加する。

## 次のアクション

- [ ] `scripts/check/check-plan-filenames.sh` を作成し、lefthook pre-commit に組み込む → Issue #946
- [ ] 既存のランダム名ファイル `golden-booping-metcalfe.md` をリネームする（任意、Issue #946 に含む）

## 分類

- カテゴリ: 知識-実行乖離
- 失敗タイプ: プロセスギャップ
- 問題の性質: プロセス的
