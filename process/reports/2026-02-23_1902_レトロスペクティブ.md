# レトロスペクティブ（2026-02-23）

## 分析期間

前回レトロ: 2026-02-16 / 今回: 2026-02-23
対象: 2026-02-16 〜 2026-02-23（7 日間、改善記録 20 件）

---

## 1. 改善システムの検証

### カテゴリ別推移

| カテゴリ | 前回（02/14-02/16, 16件） | 今回（02/16-02/23, 20件） | 増減 | 傾向 |
|---------|-------------------------|-------------------------|------|------|
| 知識-実行乖離 | 5（31%） | 8（40%） | +9pt | 再び最多。ルールは存在するが実行されないパターンが継続 |
| 視点不足 | 3（19%） | 5（25%） | +6pt | 微増。ファイル分割の副作用、操作パス検証欠落、ドキュメントデグレ |
| 参照漏れ | 3（19%） | 3（15%） | -4pt | 横ばい。main 直接コミット提案、サニタイズ漏れ、生成物直接編集 |
| コンテキスト引きずり | 0（0%） | 2（10%） | +10pt | 再出現。plan モード後のコンテキスト喪失、圧縮サマリーの検証なし採用 |
| 即座の対策 | 3（19%） | 1（5%） | -14pt | 大幅減。前回の構造的対策（#565 問題分類の必須化）が効果を発揮 |
| 単一パス検証 | 2（13%） | 1（5%） | -8pt | 減少 |

所見:
- 即座の対策が大幅改善（19%→5%）。#565 の構造的対策が機能
- 知識-実行乖離が再び集中（31%→40%）。確認事項チェック漏れ、OpenAPI 登録漏れ、チェックボックス検証未実行など、「ルールは知っている/書いてあるが実行しない」パターンが支配的
- コンテキスト引きずりの再出現（0%→10%）。コンテキスト圧縮サマリーの事実を検証なしに採用する新パターンが出現

### 失敗タイプ別推移

| 失敗タイプ | 前回（02/14-02/16） | 今回（02/16-02/23） | 増減 |
|-----------|-------------------|-------------------|------|
| プロセスギャップ | 8（50%） | 11（55%） | +5pt |
| 実行ギャップ | 8（50%） | 8（40%） | -10pt |
| 知識ギャップ | 0（0%） | 1（5%） | +5pt |

所見:
- プロセスギャップが微増し過半数（55%）。プロセス自体の設計不備が引き続き発見されている
- 実行ギャップは比率低下（50%→40%）だが件数横ばい（8件）。#565 の対策で「即座の対策」型の実行ギャップは減少した一方、チェックボックス系の実行ギャップは継続
- 知識ギャップはほぼゼロを維持（1件: ファイル分割時のクローン増加の影響）

### 対策有効性

| 対策形式 | 実施済 | 効果あり | 再発 | 有効率 |
|---------|--------|---------|------|--------|
| 行動規範 | — | 低い | 高い | 低 |
| 成果物要件 | 多数 | コード実装領域で高い | 2 件（メタレベル継続） | 中〜高 |
| フロー組み込み | 多数 | 高い | 1 件 | 高 |
| 判定テスト | 多数 | 高い | なし | 高 |
| 自動検証（新） | #735 lint | 最高 | — | 最高 |

前回との差分:
- 自動検証（lint）が新たに導入され、#735 で計画ファイルの確認事項チェック漏れを CI で自動検出する仕組みが構築された。対策形式の階梯（行動規範 → 成果物要件 → フロー組み込み → 自動検証）における最高段階
- 成果物要件の有効性はコード実装領域で維持。メタレベル（改善記録のフォーマット、ドキュメント再構成時の対策保持）では引き続き限界あり

### 再発パターン

| 元の記録 | 再発記録 | カテゴリ | 対策形式 | 分析 |
|---------|---------|---------|---------|------|
| 02-11 バックグラウンドタスクのパイプ | 02-18 長時間コマンドのパイプ実行再発 | 知識-実行乖離 | 成果物要件 | ルールのスコープが限定的（バックグラウンドのみ→フォアグラウンドも同じ問題）。#660 でスコープ拡張済み |
| 02-09/02-15 サニタイズ漏れ（2回） | 02-19 改善記録のサニタイズ漏れ再発（3回目） | 参照漏れ | 行動規範 | 3回再発。行動規範形式の限界が明確。Issue #550 の優先度を上げる必要あり |
| 02-11 テストリスト層漏れ | 02-19 テスト層記載漏れの再発 | 単一パス検証 | 成果物要件 | ルール文書のみに依存。#710 でブラッシュアップ観点に追加済み |
| 02-11 確認事項チェック漏れ | 02-20 確認事項チェック漏れの頻発 | 知識-実行乖離 | 成果物要件 | 「行動規範→成果物要件→それも守れない」の再帰。#735 で自動検証 lint 導入 |
| CLAUDE.md main 禁止 | 02-17 main ブランチへの直接コミット繰り返し提案 | 参照漏れ | 成果物要件 | 禁止ルールに例外条件が未記載で AI が例外を推測。#618 で例外なしを明記 |
| 02-16 計画ファイルコミット漏れ | 02-21 ドキュメント再構成時の改善対策デグレ | 視点不足 | 成果物要件 | 対策が CLAUDE.md リファクタリングで消失。#767 でデグレ検出の仕組み導入 |

---

## 2. プロジェクト健全性トレンド

最新 /assess レポートは 2026-02-13。GitHub Issues の実績データで補完。

### 3 軸バランス

| 軸 | 前回（02/16 レトロ） | 今回（02/23） | 方向 |
|----|------------------|-------------|------|
| Discovery | Feature 実装ゼロ、停滞 | Phase 2-4 ワークフローデザイナー完走（#722-#727）、Observability 基盤完走（#648-#657）、UI/UX 刷新完了、API テストカバレッジ拡充（#774-#780） | ↑ 大幅改善 |
| Delivery | オープン 32 件、消化 20 件/3 日 | 7 日間で約 100 件クローズ。消化ペースが加速 | ↑ 改善 |
| Sustainability | 大型ファイル 21 件（最大 1882 行） | 改善記録 20 件/週で発見→対策サイクルが高回転。lint 自動検証 #735 導入 | ↑ 改善 |

### バランス評価

前回レトロの最大の懸念だった「Feature 0%」が解消。Phase 2-4 ワークフローデザイナーの設計・実装・テストが完走し、Phase 2-3 の E2E テスト、Observability 基盤、UI/UX 刷新、トランザクション整合性確保と、幅広い Feature が一気に進んだ。3 軸すべてが改善方向で、前回の「守りに偏重」からバランスが回復した。

---

## 3. SRE 的観点

### 再発率・MTTR

- 再発率: 6/20 件（30%）— 前回比 +11pt（19%→30%）
- 平均 MTTR: 約 0.8 日 — 前回比 +0.4 日（0.4 日→0.8 日）

所見:
- 再発率が 30% に上昇。特にサニタイズ漏れ（3回目）、確認事項チェック漏れ（頻発）が寄与
- ただし、再発に対する対策の質は向上。自動検証 lint（#735）、スコープ拡張（#660）、デグレ検出（#767）と、より構造的な対策が講じられた
- MTTR は若干上昇したが 1 日以内を維持。問題発見→対策のサイクルは引き続き高速

### Toil

| Toil 候補 | 頻度 | 自動化可能性 | 推奨 |
|----------|------|------------|------|
| 改善記録のサニタイズ確認 | 記録毎 | 高 | lefthook pre-commit で引用符チェック。Issue #550 の優先度を上げる |
| 確認事項チェックボックス更新 | Phase 毎 | ✅ 対応済み | #735 で lint 自動検出導入済み |
| ドキュメント再構成時の対策保持確認 | リファクタリング毎 | 中 | #767 で仕組み導入済み |
| テスト層の網羅性確認 | 計画作成毎 | 中 | #710 でブラッシュアップ観点に追加済み |

前回 Toil 候補の対応状況:
- ✅ 改善記録の品質管理 → #566 テンプレートバリデーション完了
- ✅ レトロ Issue の対象期間算出 → #567 修正完了
- ⚠️ 改善記録のサニタイズ → 3回目再発。Issue #550 未対応
- ✅ review-and-merge メンテナンス → #694 複数 PR 対応完了

### エラーバジェット

| カテゴリ | 件数 | 比率 |
|---------|------|------|
| Feature（攻め） | 33 | 33% |
| Maintain/Improve（守り） | 60 | 60% |
| Fix | 7 | 7% |

前回比: Feature 0%→33%（+33pt）、Maintain/Improve 95%→60%（-35pt）

所見: Feature 比率が 0%→33% に大幅回復。Phase 2-4 ワークフローデザイナーの設計・実装・テスト完走が最大の寄与。Observability 基盤、UI/UX 刷新、トランザクション整合性確保と複数の Feature ストリームが並行実行された。攻め/守り比率 33:60 はバランス良好。

---

## 4. アクションアイテム

| 優先度 | カテゴリ | アクション | 根拠 |
|--------|---------|---------|------|
| High | Improve | 改善記録のサニタイズを自動化する（Issue #550 の優先度を上げ、lefthook lint を追加） | 3回再発、行動規範形式の限界が実証済み。再発率 30% の最大寄与因子の一つ |
| High | Improve | 知識-実行乖離（40%）の構造的対策を検討する。#735 lint の成功例を横展開し、「ルールが存在するが実行されない」パターンの自動検証化を推進 | カテゴリ最多が 3 期連続 |
| Medium | Feature | Phase 2-5（通知 + ドキュメント管理）の設計に着手する | Phase 2-4 完走により前提条件クリア。AWS SES/S3 連携の学習価値が高い |
| Medium | Improve | /assess の月次診断を実施する（前回 02-13 から 10 日経過） | 健全性トレンドの定点観測に必要。大型ファイル数等の正確な計測が必要 |
| Low | Improve | コンテキスト圧縮サマリーの検証プロセスを定義する | 新パターンのコンテキスト引きずり（圧縮サマリーの事実主張を検証なし採用）への対策 |

---

## セルフレビュー記録

| ループ | 観点 | 修正内容 |
|-------|------|---------|
| 1回目 | データ正確性 | カテゴリ集計 20 件の合計を検証（8+5+3+2+1+1=20）。失敗タイプ集計（11+8+1=20）。整合確認済み |
| 1回目 | 解釈妥当性 | 即座の対策の大幅減（19%→5%）を「#565 の効果」と解釈。#565 のクローズ日（02-16）と今期の改善記録を照合し、問題分類の必須化が確かに機能していることを確認 |
| 1回目 | アクション根拠 | 全アクションがデータに紐づいていることを確認。修正なし |
| 2回目 | 解釈妥当性 | エラーバジェットの Feature 分類を再精査。API テスト拡充を「既存機能のテスト追加」として Maintain に再分類。Feature 33% は Observability + Phase 2-4 + UI/UX + トランザクションが主体であることを確認 |

## 総合所見

前回レトロ（02-16）から 7 日間で、プロジェクトは大きく前進した。

良い変化:
1. Feature 比率が 0%→33% に回復。Phase 2-4 ワークフローデザイナー完走、Observability 基盤構築、UI/UX 刷新が達成
2. 即座の対策パターンが 19%→5% に大幅改善。#565 の構造的対策が有効
3. 自動検証 lint（#735）の導入により、対策形式の階梯が最高段階に到達
4. 7 日間で約 100 件の Issue をクローズし、Delivery ペースが大幅に加速

注意が必要な変化:
1. 再発率が 19%→30% に上昇。対策の質は向上しているが、行動規範形式の対策が依然として再発を防げない
2. 知識-実行乖離が 3 期連続でカテゴリ最多。AI エージェントの「ルールを知っているが実行しない」パターンの構造的解消が最大の課題
3. コンテキスト引きずりの再出現（コンテキスト圧縮サマリーの無検証採用）が新たなリスク

次のフォーカス:
1. サニタイズ自動化（#550）と lint 横展開で再発率を下げる
2. Phase 2-5 の設計着手で Feature ストリームを維持
3. /assess 月次診断でコード健全性の正確な計測を行う
