# CI バイナリキャッシュ導入

Issue: #592
PR: #593
ブランチ: `feature/592-skip-rust-build-on-frontend-only-changes`

## 概要

`e2e-test` / `api-test` ジョブにリリースバイナリキャッシュを導入し、バックエンドソースに変更がない場合の `cargo build --release` をスキップするようにした。

## 実施内容

1. Issue #592 の精査: As-Is を ci.yaml で実測し、Issue の記載内容と照合
2. `api-test` ジョブに `actions/cache@v5` によるバイナリキャッシュステップを追加
3. `e2e-test` ジョブに同様のキャッシュステップを追加
4. 両ジョブのビルドステップに `if: steps.backend-cache.outputs.cache-hit != 'true'` を追加
5. GitHub Actions ナレッジベースにバイナリキャッシュ戦略セクションを追記（CI キャッシュの3層構造を整理）

## 判断ログ

- キャッシュキーに Rust toolchain バージョンを含めない判断: ci.yaml にピン留め（1.93.0）されており、変更時は通常 Cargo.toml/Lock も変わるため
- `restore-keys` を不使用とする判断: バイナリキャッシュは完全一致が必要。Cargo registry キャッシュ（部分ヒットが有用）とは異なる
- sccache セットアップをキャッシュヒット時も残す判断: 条件分岐を増やすより、キャッシュミス時に sccache の恩恵を受けられるシンプルさを優先

## 成果物

### コミット

| コミット | 内容 |
|---------|------|
| `8b27044` | `#592 Add binary caching to skip Rust build on frontend-only changes` |
| `39eccc5` | `#592 Add plan file for binary caching` |

### 作成・更新ファイル

| ファイル | 種類 |
|---------|------|
| `.github/workflows/ci.yaml` | 更新: api-test, e2e-test にキャッシュステップ追加 |
| `docs/06_ナレッジベース/devtools/GitHubActions.md` | 更新: バイナリキャッシュ戦略セクション追加 |
| `prompts/plans/peppy-stargazing-plum.md` | 新規: 計画ファイル |
