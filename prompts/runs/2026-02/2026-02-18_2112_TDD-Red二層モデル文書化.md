# #637 TDD Red フェーズの二層モデル文書化

## 概要

Issue #637 に基づき、TDD 開発フローの Red セクションに「二層の Red モデル」を導入し、コンパイルエラー解消の位置づけを明示した。ナレッジベースには nano-cycle（Robert C. Martin）との対応関係を追記した。

## 実施内容

### Phase 1: TDD 開発フローの Red セクション拡充

`docs/04_手順書/04_開発フロー/02_TDD開発フロー.md` の Red セクションを拡充:

- ステップリストに二層モデルとの対応を括弧で付記（`→ Red: compile`、`→ Green: compile / Red: test failure`）
- 「二層の Red モデル」サブセクションを追加（比較表 + Mermaid フローチャート）
- 「コンパイルエラー解消の原則」サブセクションを追加（書くもの / 書かないもの、Rust / Elm コード例）
- メンタルモデルの解説（コンパイラ = 最初のテストランナー）
- 「既知手法との対応」サブセクションを追加（nano-cycle、Compiler-Driven Development、GOOS との対応表）
- 参考資料セクションに Clean Craftsmanship と GOOS を追加

### Phase 2: ナレッジベースに nano-cycle の対応を追記

`docs/06_ナレッジベース/methodology/独自フレームワークと既知手法の対応.md` に追記:

- 全体像 Mermaid 図に `NC["nano-cycle（Uncle Bob）"]` ノードと `ID --> NC` エッジを追加
- 「nano-cycle と二層の Red モデル（Robert C. Martin）」サブセクションを追加（SDD セクションの前に配置）
- 関連リソースに Clean Craftsmanship と GOOS を追加
- 変更履歴を更新

## 判断ログ

- 設計原則レンズ確認（Phase 1 完了後）: 意図の明確さ OK、重複の排除 OK（TDD フローとナレッジベースは異なる観点で記述）、要素の最小性 OK
- 設計原則レンズ確認（Phase 2 完了後）: 参照の一貫性 OK、用語の統一 OK
- 環境問題: API テストの DynamoDB ポート競合（別 worktree のコンテナが残存）→ 停止して解消。2回目のタイムアウトは Cargo キャッシュロック競合が原因→ 再実行で解消

## 成果物

### コミット

- `#637 WIP: Clarify compile error role in TDD Red phase`（空コミット、Draft PR 作成用）
- `#637 Clarify compile error role in TDD Red phase with two-layer model`（ドキュメント変更）

### 作成・更新ファイル

| ファイル | 変更 |
|---------|------|
| `docs/04_手順書/04_開発フロー/02_TDD開発フロー.md` | Red セクション拡充（+79行） |
| `docs/06_ナレッジベース/methodology/独自フレームワークと既知手法の対応.md` | nano-cycle セクション追加（+25行） |
| `prompts/plans/637_tdd-red-compile-error.md` | 計画ファイル（新規） |
