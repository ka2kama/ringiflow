# isAdmin ロールチェックと dev auth 権限の修正

## 概要

フロントエンドの `isAdmin` が存在しないロール名 `"admin"` をチェックしていたバグと、dev auth の権限に `workflow_definition:manage` が不足していた問題を修正した。

## 実施内容

1. `Shared.elm` の `isAdmin` 関数で `"admin"` → `"tenant_admin"` に修正
   - 仕様書（機能仕様書 4.6）のシステムロール定義と DB シードデータを突合し、`"admin"` というロールが存在しないことを確認
   - `tenant_admin` が管理セクション表示の正しい判定ロール
2. `dev_auth.rs` の `DEV_USER_PERMISSIONS` に `workflow_definition:manage` を追加
   - マイグレーション `20260220000001` で DB 上の `tenant_admin` ロールに追加済みだが、dev auth のハードコード値が追従していなかった
   - `Permission::satisfies` のワイルドカードマッチングで `workflow:*` は `workflow_definition:manage` にマッチしない（リソース名が異なるため）
3. `SharedTest.elm` のテストデータを `"tenant_admin"` に更新

## 判断ログ

- `isAdmin` の修正方針: `"admin"` を `"tenant_admin"` に変更する単純修正を採用。権限ベースへの移行（選択肢 C）は現時点では不要と判断
- dev auth 権限: DB の `tenant_admin` ロールに合わせてハードコード値を更新。dev auth の権限が DB と乖離するリスクは認識しているが、構造的対策は別 Issue とする

## 成果物

コミット:
- `760b29c` Fix admin role check and dev auth permission mismatch
- `824f8c3` Update isAdmin test to use tenant_admin role

変更ファイル:
- `frontend/src/Shared.elm` — `isAdmin` のロールチェック修正
- `backend/apps/bff/src/dev_auth.rs` — `workflow_definition:manage` 権限追加
- `frontend/tests/SharedTest.elm` — テストデータ更新

PR: #760

## 議論の経緯

- Epic #405 のトップページからの導線を調査した際に、`isAdmin` が `"admin"` をチェックしていることを発見
- 仕様書のロール定義と DB シードデータを突合し、`"admin"` が存在しないロール名であることを確認
- 修正後、ワークフロー定義の新規作成で権限エラーが発生。`Permission::satisfies` のマッチングロジックを確認し、`workflow:*` が `workflow_definition:manage` にマッチしない仕様を把握
- マイグレーション `20260220000001` で DB 側は対応済みだが dev auth のハードコード値が未追従であることを特定
