# デザイナーノード削除 UI とドラッグ境界制約

## 概要

ワークフローデザイナーの 2 つの UX 問題を解決した:

1. ステップ削除操作のディスカバラビリティ向上（プロパティパネルに削除ボタンを追加）
2. ノードのドラッグ境界制約（viewBox 外への移動を防止）

Issue: #787

## 実施内容

### Phase 1: clampToViewBox 関数の追加

- `DesignerCanvas.elm` に `clampToViewBox : Position -> Position` を追加
- ステップサイズ（180x90）を考慮し、x ∈ [0, 620]、y ∈ [0, 510] に制約
- 5 テストを追加

### Phase 2: Designer.elm に境界制約を適用

3 箇所に `clampToViewBox` を適用:

- `DraggingExistingStep` ハンドラ（既存ステップのドラッグ中）
- `CanvasMouseUp` の `DraggingNewStep`（新規ドロップ時）
- `viewDragPreview`（プレビュー表示とドロップ位置の一貫性確保）

2 テストを追加。

### Phase 3: プロパティパネルに削除ボタンを追加

- `Msg` 型に `DeleteSelectedStep` を追加
- `deleteSelectedStep` ヘルパー関数を抽出し、`KeyDown "Delete"` と `DeleteSelectedStep` で共通化
- プロパティパネルに `Button.Error` バリアントの削除ボタンと「Delete キーでも削除できます」ヒントを配置
- ConfirmDialog は不使用（設計判断: キーボード削除との一貫性、非永続データ、ビジュアルエディタ慣行）
- 3 テストを追加

## 判断ログ

- Refactor: `KeyDown "Delete"` のステップ削除ロジックを `deleteSelectedStep` ヘルパーに抽出し、新しい `DeleteSelectedStep` Msg と共通化した
- Refactor: Elm コンパイラが `( Nothing, _ )` の後の `_ ->` ケースを到達不能と検出したため除去した
- 設計判断: ConfirmDialog を使用しない（理由: keyboard Delete が確認なしで動作しており、ボタンだけ確認を出すと一貫性が崩れる。保存前のキャンバス操作は非永続）

## 成果物

### 変更ファイル

| ファイル | 変更内容 |
|---------|---------|
| `frontend/src/Data/DesignerCanvas.elm` | `clampToViewBox` 関数追加 |
| `frontend/src/Page/WorkflowDefinition/Designer.elm` | 境界制約適用、`DeleteSelectedStep` Msg、`deleteSelectedStep` ヘルパー、削除ボタン UI |
| `frontend/tests/Data/DesignerCanvasTest.elm` | 5 テスト追加 |
| `frontend/tests/Page/WorkflowDefinition/DesignerTest.elm` | 5 テスト追加 |

### テスト結果

全 454 テスト通過（+10 テスト追加）
