# 改善記録バリデーション

## 概要

改善記録の分類セクション（カテゴリ・失敗タイプ・問題の性質）が標準フォーマットに準拠しているかを自動バリデーションするスクリプトを作成し、`just check` に統合した。

Issue: #566
PR: #590

## 実施内容

1. `scripts/check-improvement-records.sh` を新規作成
   - `prompts/improvements/????-??/*.md` を走査
   - `## 分類` セクション、`- カテゴリ:`、`- 失敗タイプ:` のフォーマットと値を検証
   - `- 問題の性質:` は警告のみ（2026-02-15 導入で 70 件が未対応のため）
2. 非標準記録 3 件の修正（`## 分類` セクション追加、標準カテゴリ値の割り当て）
3. 不正カテゴリ値 1 件の修正（`プロセスギャップ` → `視点不足`）
4. `justfile` に `lint-improvements` タスク追加、`check-parallel.sh` の Non-Rust レーンに統合

## 判断ログ

- `問題の性質` フィールドをエラーではなく警告とした。71 件中 2 件のみ対応済みのため、エラーにすると既存記録が全件失敗する。遡及追加は別 Issue で対応
- 統合先を `just lint` ではなく `just check`（構造品質チェック）とした。改善記録のバリデーションは `check-file-size`、`check-duplicates` と同カテゴリ
- 括弧付き補足（`知識-実行乖離（...）`）は全角・半角両方に対応して値を抽出

## 成果物

- `scripts/check-improvement-records.sh` — 新規作成
- `justfile` — `lint-improvements` タスク追加
- `scripts/check-parallel.sh` — Non-Rust レーンに追加
- 改善記録 4 件 — フォーマット修正
- `prompts/plans/566_improvement-record-validation.md` — 計画ファイル
