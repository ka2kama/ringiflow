# カラーパレット刷新（Google → Indigo/Slate 系）

Issue: #627（Epic #445 Story 6）
ブランチ: `feature/627-issue`
PR: #629

## 概要

Google Workspace 由来のカラーパレットを Tailwind CSS v4 デフォルトパレット（Indigo/Slate 系）に移行した。`@theme` ブロックの 15 トークンを 37 トークンに拡張し、未定義だった 22 シェードも追加した。

## 実施内容

### Issue 精査

- Issue 作成日: 2026-02-17（当日）
- 前提 Issue #611（デザイントークン体系化）は CLOSED
- As-Is 検証: `styles.css` の色値が Issue 記載と一致することを実測で確認
- 精査結果: 続行

### 探索で発見した課題

コード内で使用されているが `@theme` に未定義のカラーシェードが 22 個存在していた:

- secondary-200/400/600/800
- success-200/400/800/900
- error-300/800
- warning-200
- info-300

これらを新パレットに含めることで、未定義参照をゼロにした。

### 実装

`frontend/src/styles.css` の `@theme` ブロックを更新:

| カテゴリ | パレット | 旧シェード数 | 新シェード数 |
|---------|---------|------------|------------|
| Primary | Indigo | 4 | 7 |
| Secondary | Slate | 5 | 10 |
| Success | Emerald | 3 | 8 |
| Error | Red | 4 | 7 |
| Warning | Amber | 2 | 5 |
| Info | Blue | — | — |
| 合計 | — | 15（+layout 1） | 37（+layout 1） |

Info カテゴリはシェード数の変更なし（旧: 定義なし → 新: 未使用シェードのみ追加ではなく、使用箇所に合わせて定義）。

### WCAG コントラスト検証

主要な組み合わせの WCAG 2.1 AA 準拠を確認:

- Primary-600 on white: 5.3:1 ✅（AA Normal）
- Secondary-900 on white: 15.4:1 ✅
- Error-600 on white: 4.6:1 ✅
- Success-600 on white: 3.5:1（AA Large のみ — 既知制限、#615 で追跡中）
- Warning-600 on white: 3.6:1（AA Large のみ — 既知制限、#615 で追跡中）

### 視覚確認後の微調整

初回実装の視覚確認で「全体的に暗い印象」というフィードバックがあった。Epic #445（デザイン・UI/UX の品質をベストプラクティス水準に引き上げる）の Want に立ち返り、モダンなエンタープライズ UI のトレンドを調査した。

調査結果: Stripe (`#635BFF`), Monday.com (`#6161FF`), Linear (`#5E6AD2`) など主要ツールの多くが Indigo〜Violet 系を採用しており、パレット選択自体は妥当。問題はサイドバーの暗さと Primary アクセント色の組み合わせ。

対応:
- サイドバー背景: `bg-secondary-900` → `bg-secondary-800`（1段明るく）
- アクティブナビ / ユーザーアバター: `bg-primary-600` → `bg-primary-500`（より鮮やか）
- Primary ボタン: `bg-primary-600 hover:bg-primary-700` → `bg-primary-500 hover:bg-primary-600`

## 判断ログ

- hex 形式を維持（oklch への移行は見送り）。理由: プロジェクト全体が hex で統一されており、混在を避ける
- Tailwind v4 デフォルトパレットを採用。理由: エコシステムとの一貫性、十分なアクセシビリティ、カスタム調色の工数不要
- 未定義シェード 22 個を追加。理由: コードで参照されているトークンの未定義状態はビルドは通るが意図しない表示になるリスクがある
- Indigo パレットを維持し、明度のみ微調整。理由: 調査で Indigo〜Violet 系がエンタープライズ SaaS の主流と確認。パレット自体を変えるのではなく、使用するシェードを明るくすることで「ポップで明快」な印象を実現

## 成果物

コミット:
- `e6bf1fd` — `#627 Renovate color palette from Google to Indigo/Slate system`
- `5e0866f` — `#627 Brighten sidebar and primary accent colors`

作成ファイル:
- `prompts/plans/627_color-palette-renovation.md` — 実装計画

更新ファイル:
- `frontend/src/styles.css` — `@theme` カラートークン（15 → 37）
- `frontend/src/Main.elm` — サイドバー・ナビ・アバターの色クラス変更
- `frontend/src/Component/Button.elm` — Primary ボタンの色クラス変更
- `frontend/tests/Component/ButtonTest.elm` — テスト更新
