# 2026-02-24 接続線端点のドラッグ付け替え

## Issue

#907: ワークフローデザイナー: 接続線の始点・終点をドラッグで付け替え可能にする

## 変更概要

ワークフローデザイナーの接続線（Transition）の端点をドラッグして別のステップに付け替える機能を実装した。

## 設計判断

### DraggingState の拡張

`DraggingReconnection Int ReconnectEnd Position` を 1 バリアントで追加。`ReconnectEnd`（SourceEnd | TargetEnd）でパラメータ化し、CanvasMouseMove の処理を共通化した。2 バリアント方式（DraggingReconnectFrom / DraggingReconnectTo）は重複が多いため不採用。

### trigger の維持

再接続時は既存の trigger（approve/reject/Nothing）をそのまま維持する。`autoTrigger` は新規接続作成時のみ使用。ユーザーが意図的に端点を変えたのに trigger が自動変更されるのは予期しない動作であるため。

### 表示制御

DraggingReconnection 中は対象の接続線を非表示にし、プレビュー線のみ表示する。元の線とプレビューの重なりを防止。

### プレビュー線の共通化

`viewPreviewLine` ヘルパーを抽出し、DraggingConnection と DraggingReconnection でベジェ曲線レンダリングを共有。

## 変更ファイル

| ファイル | 変更内容 |
|---------|---------|
| `frontend/src/Data/DesignerCanvas.elm` | `ReconnectEnd` 型、`DraggingReconnection` バリアント追加 |
| `frontend/src/Page/WorkflowDefinition/Designer.elm` | Msg 追加、update ロジック、view（ハンドル + プレビュー） |
| `frontend/tests/Page/WorkflowDefinition/DesignerTest.elm` | 9 テスト追加 |
| `docs/40_詳細設計書/15_ワークフローデザイナー設計.md` | 型定義・Msg 更新 |
