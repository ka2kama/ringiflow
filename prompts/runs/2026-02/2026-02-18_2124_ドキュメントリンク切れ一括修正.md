# ドキュメントリンク切れ一括修正

Issue: #672

## 概要

`just check-doc-links` で検出されていた 157 件のリンク切れをすべて修正し、スクリプトを強化してリンク切れをブロックするようにした。

## 実施内容

### リンク切れの分析

`check-doc-links.sh` の出力を分析し、157 件のリンク切れを 5 つの根本原因に分類した:

| 根本原因 | 件数（概算） | 内容 |
|---------|------------|------|
| サブディレクトリ化 | ~40 | `docs/80_ナレッジベース/` にサブディレクトリ導入時の `../` → `../../` 未更新 |
| ディレクトリ移動 | ~30 | `prompts/improvements/` → `process/improvements/` のリンク未追従 |
| パス深さの誤り | ~30 | `prompts/runs/2026-01/` からの相対パスが2段（`../../`）で3段（`../../../`）必要 |
| リファクタリング未反映 | ~15 | `auth.rs` ディレクトリ分割、`deletion/` ファイル統合 |
| 旧パス残存 | ~15 | `docs/05_技術ノート/` → `docs/80_ナレッジベース/` リネーム前のパス |

残り ~25 件は個別修正（ファイル名の誤り、絶対パスの混入、テンプレート例示等）。

### リンク修正

78 ファイルを修正。カテゴリごとにサブエージェントで並行処理し、4 グループに分けて実施した。

### スクリプト改善

`scripts/check-doc-links.sh` に以下の改善を実施:

1. コードブロック（``` で囲まれた範囲）内のリンクを検出対象から除外
2. テンプレート・例示パターンのスキップ条件追加（`xxx.md`, `path` 等）
3. `exit 0`（警告のみ） → `exit 1`（ブロック）に変更

## 判断ログ

- Terraform 手順書の未作成ファイルへのリンク: Markdown リンクからコードスパンに変換した。リンク先が将来作成されるファイルであるため、リンクとして機能させる必要がない
- コードブロック内リンクの扱い: スクリプト側で除外する方式を選択。パスの正確性よりも false positive の排除を優先した
- 存在しない実装解説ファイルへのリンク: 統合後のファイルへのリンクに変更した（セッションログ内の旧 Phase 別ファイル参照）

## 成果物

### コミット

- `baf9fd6` #672 Fix all 157 broken document links and harden link checker

### 変更ファイル

78 ファイル（160 insertions, 147 deletions）

| カテゴリ | ファイル数 |
|---------|-----------|
| `docs/80_ナレッジベース/` | 21 |
| `docs/90_実装解説/` | 7 |
| `docs/70_ADR/` | 6 |
| `docs/` その他 | 6 |
| `prompts/runs/` | 25 |
| `prompts/plans/` | 8 |
| `prompts/recipes/` | 1 |
| `.claude/rules/` | 2 |
| `scripts/` | 1 |
