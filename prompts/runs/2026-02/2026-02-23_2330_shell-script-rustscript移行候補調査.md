# シェルスクリプトの rust-script 移行候補調査

関連: #833

## 概要

PR #825 で rust-script を導入した実績を受け、既存の全シェルスクリプト（30 ファイル）を ADR-015 の移行基準に照らして評価した。

## 判断ログ

### 移行候補の選定基準

ADR-015 の移行基準（複雑なロジック / バグリスク / ユニットテスト必要性）を適用。

- Shell で Rust ソースコードを解析するスクリプト（`instrumentation.sh`）を最優先と判定: `sed -n "${i}p"` ループでの前方スキャンは本質的に脆弱
- スキーマバリデーション系（`improvement-records.sh`, `impl-docs.sh`）を中優先: 配列/連想配列ベースのロジックは Rust の型システムで表現すべき
- perl 依存スクリプト（`sync-epic.sh`）を中優先: 依存排除の観点

### 移行不推奨の判断

- オーケストレーター型スクリプト（21 ファイル）: 外部コマンド委譲が主で、Shell が最適
- `cleanup.sh`（243 行）: 大きいが git/docker の状態チェックの連鎖であり、ロジック的複雑さは低い
- `dump-schema.sh`: awk ステートマシンはテキストストリーム処理に適切なツール選択
- `infra/lightsail/*`: リモートサーバー実行のため rust-script インストールコストが見合わない

### ADR-056 スコープ拡張の提案

`scripts/` は Shell 原則だが、ADR-015 基準該当時は rust-script を許容する方向を提案。根拠: Rust ツールチェインは既にプロジェクトの前提依存。

## 成果物

- Issue コメント: #833 に調査結果を投稿
- 個別 Issue: #834（高）, #835（中）, #836（中）, #837（中）
