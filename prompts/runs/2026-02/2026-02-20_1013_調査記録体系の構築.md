# 調査記録体系の構築

## 概要

トラブルシューティング時の仮説/検証プロセスを「調査記録」として永続化するための文書体系を構築した。既存の `troubleshooting.md` が定義する仮説追跡表の「会話内にインラインで記録する」という運用から、リポジトリに永続化する体系へ拡張した。

関連: #719, PR #720

## 実施内容

### Phase 1: 調査記録の基盤構築

`process/investigations/README.md` を新規作成し、以下を定義した:

- 目的（監査証跡 + 知識の再利用）
- 作成トリガー（仮説検証 2 回以上）
- ディレクトリ構造（`YYYY-MM/` 月別管理、改善記録と同じパターン）
- ファイル命名規則（`YYYY-MM-DD_HHMM_<トピック>.md`）
- テンプレート（必須/任意セクションの区別を含む）
- 他文書との関係（セッションログ、改善記録、ナレッジベース、troubleshooting.md）

### Phase 2: 既存システムとの統合

4 ファイルを更新し、調査記録を既存のドキュメント体系に組み込んだ:

1. `.claude/rules/troubleshooting.md` — 仮説追跡セクションに調査記録への永続化パスを追加
2. `CLAUDE.md` — ドキュメント自動作成ルールとドキュメント体系テーブルに追加
3. `.claude/skills/wrap-up/SKILL.md` — チェックリストと作成手順に追加

## 判断ログ

- 配置先: `process/investigations/`（改善記録と同列のプロセス記録）を採用。`docs/80_ナレッジベース/` は時系列管理が合わず、`prompts/runs/` はセッションログの軽量性と矛盾するため見送り
- 作成トリガー: 仮説検証 2 回以上。`troubleshooting.md` の既存閾値「2 回以上の試行に及ぶ場合、仮説の追跡を行う」と一致させた
- セッションログとの関係: 独立文書 + 相互参照を採用。セッションログ README が「Slack のチャット履歴と同程度の軽量な記録」と定義しており、調査の詳細証跡はこの軽量さと矛盾するため

## 成果物

### 新規作成

- `process/investigations/README.md` — 調査記録の規約・テンプレート
- `prompts/plans/719_investigation-records.md` — 計画ファイル

### 更新

- `.claude/rules/troubleshooting.md` — 調査記録への永続化セクション追加
- `CLAUDE.md` — ドキュメント自動作成ルール・体系テーブルに追加
- `.claude/skills/wrap-up/SKILL.md` — 引数・チェックリスト・作成手順・コミットメッセージ例に追加
