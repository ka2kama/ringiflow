# /start スキル精査チェック追加

## 概要

`/start` スキルのワークフロー状態マシンに精査完了の検証（Step 3.5）を追加した。状態 B/C/D で精査コメントの有無を確認し、未精査の場合は状態に応じてブロッキングまたは注記を行う。また、dev-flow-issue.md のフロー概要を Mermaid フローチャートに置換し、精査結果による分岐を可視化した。

関連: Issue [#944](https://github.com/ka2kama/ringiflow/issues/944)、PR [#945](https://github.com/ka2kama/ringiflow/pull/945)

## 実施内容

### 1. Step 3.5: 精査完了の検証

Step 3（状態検出）と Step 4（状態別フロー）の間に、精査コメントの有無を検証する共通ステップを追加した。

検出方法:
```bash
gh issue view <Issue番号> --json comments --jq '[.comments[].body | select(test("## Issue 精査"))] | length'
```

判定基準: dev-flow-issue.md の成果物要件「記録がない場合、精査が実施されたとみなさない」に基づく。

### 2. 状態別の制約強度

| 状態 | 制約 | 理由 |
|------|------|------|
| A | 変更なし | 既に精査を含む（4a-2） |
| B | ブロッキング | ブランチ存在 ≠ 精査完了。精査後に Draft PR 作成 |
| C | ブロッキング（警告付き） | 作業続行前に精査を実施 |
| D | 注記のみ | レビュー中のため精査をブロッキング要件にするのは過剰 |

### 3. Mermaid フローチャート

dev-flow-issue.md の一本道テキスト表記を `flowchart LR` に置換し、精査結果の分岐（続行 / 修正して続行 / 再構成 / 破棄）を明示した。

## 判断ログ

- Step 3.5 として共通ステップに抽出した。各状態内に埋め込む案と比較し、DRY を優先して重複記述を避けた
- 状態 D は非ブロッキング（注記のみ）とした。レビュー中に精査をブロッキング要件にするのは過剰と判断
- Mermaid レイアウトは `LR`（左→右）を採用。既存の一本道表記が横方向であること、フロー全体が長いため `TD` だと見にくくなることから

## 成果物

### コミット

- `eeb511e9` #944 Add scrutiny check to /start skill workflow states (#945)

### 作成・更新ファイル

| ファイル | 内容 |
|---------|------|
| `.claude/skills/start/SKILL.md` | Step 3.5 追加、状態 B/C/D の精査チェック統合 |
| `.claude/rules/dev-flow-issue.md` | フロー概要を Mermaid フローチャートに置換 |
| `prompts/plans/jiggly-plotting-castle.md` | 計画ファイル |
