# マイクロインタラクション改善

Issue: #614（Epic #445 Story 4）
PR: #640

## 概要

状態変化のトランジション（MessageAlert、ConfirmDialog）、hover エフェクトの一貫性、`prefers-reduced-motion` 対応の 3 つのギャップを解消した。

## 実施内容

### Phase 1: CSS アニメーション基盤

`styles.css` に以下を追加:

- `@theme` 内に `--animate-alert-in` と `@keyframes alert-in`（fade-in + slide-down, 200ms）
- `@theme` 外に ConfirmDialog 用 CSS ルール（`dialog-in`, `backdrop-in`）
- `#confirm-dialog[open] .dialog-content` セレクタで `showModal()` タイミングと同期
- `prefers-reduced-motion` グローバルメディアクエリ（Andy Bell Modern CSS Reset パターン）

### Phase 2: MessageAlert アニメーション

- `viewSuccessMessage`、`viewErrorMessage` の `Just` ブランチに `animate-alert-in` クラスを追加
- `MessageAlertTest.elm` を新規作成（4 テスト）

### Phase 3: ConfirmDialog アニメーション

- 内容 div に `dialog-content` クラスを追加（CSS ターゲティング用）
- `ConfirmDialogTest.elm` に `dialog-content` クラス存在テストを追加

### Phase 4: hover トランジション統一

12 箇所（10 ファイル）に `transition-colors` を追加:
- パン屑リンク 6 箇所（User/New, User/Edit x2, User/Detail, Role/New, Role/Edit）
- インタラクティブ要素 6 箇所（Main ハンバーガー, Workflow/List x2, User/List, ApproverSelector x2）

### Phase 5: デザインガイドライン更新

`styles.css` のガイドラインコメントにアニメーション・トランジション・アクセシビリティパターンを追記。

## 判断ログ

- 設計判断は前セッション（計画フェーズ）で確定済み。実装フェーズでの変更なし
- Tailwind v4 の `@theme` 内 `@keyframes` 配置は WebFetch で公式ドキュメントを確認し、計画ファイルの確認事項を更新
- `Selector.class` はプロジェクト内に既存使用なし。テスト実行で動作確認
- Phase 4 の全 12 箇所を Read で実測確認し、計画との一致を検証

## 成果物

コミット:

1. `#614 Add CSS animation infrastructure for micro-interactions`
2. `#614 Add animate-alert-in class to MessageAlert component`
3. `#614 Add dialog-content class to ConfirmDialog for CSS animation targeting`
4. `#614 Add transition-colors to hover elements for consistent interactions`
5. `#614 Update design guidelines with animation and transition patterns`
6. `#614 Update plan file with completed confirmation items and test lists`

新規ファイル:

- `frontend/tests/Component/MessageAlertTest.elm`
- `prompts/plans/614_micro-interactions.md`
