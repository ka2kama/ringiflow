# Volta から mise への移行

## 概要

Node.js バージョン管理ツールを Volta（メンテナンス停止）から mise に移行した。個人環境のシェル設定変更と、プロジェクトレベルの設定ファイル変更・ドキュメント更新を実施。

## 実施内容

### 個人環境の移行

- mise で node@22、pnpm、elm@0.19.1、npm:elm-format@0.8.8、npm:zenn-cli をインストール
- `~/.zshenv`、`~/.bashrc`、`~/.profile` から `VOLTA_HOME` と PATH 設定を削除
- `~/.zshrc` の `upd()` 関数から Volta 関連コマンドを削除

### プロジェクトレベルの移行（Issue #699、PR #700）

- `.mise.toml` を project root に新規作成（node="22", elm="0.19.1", npm:elm-format="0.8.8"）
- `frontend/package.json` と `tests/e2e/package.json` から `volta` セクションを削除
- `frontend/README.md` の Volta セクションを mise に置換
- `docs/04_手順書/01_開発参画/01_開発環境構築.md` の Node.js/pnpm インストール手順を更新（Volta 選択肢削除、mise 推奨化）
- ADR-052 を作成

### 付随変更

- `.claude/settings.json` に `Bash(gh api graphql -f query*)` を追加（ringiflow-3 から取り込み）
- `.claude/settings.json` の権限リスト（allow/ask/deny）をアルファベット順にソート

## 判断ログ

- `.mise.toml` の node バージョンをメジャーのみ（`"22"`）に指定。CI の `node-version: '22'` と一致させ、mise が最新 22.x LTS を自動解決する方針
- elm-test は `frontend/package.json` の `devDependencies` に含まれているため `.mise.toml` には含めない判断
- 開発環境構築ドキュメントから Volta の選択肢を削除。メンテナンス停止のため新規参画者に推奨できないと判断。nvm は代替として残した

## 成果物

コミット:
- `002e9c7 #699 Migrate Node.js version management from Volta to mise`
- `fb5f774 #699 Allow gh api graphql query in Claude Code settings`

作成/更新ファイル:
- `.mise.toml`（新規）
- `docs/05_ADR/052_Node.jsバージョン管理のmiseへの移行.md`（新規）
- `prompts/plans/agile-tumbling-iverson.md`（新規、後に `699_volta-to-mise-migration.md` にリネーム）
- `frontend/package.json`、`tests/e2e/package.json`（volta セクション削除）
- `frontend/README.md`（mise セクションに更新）
- `docs/04_手順書/01_開発参画/01_開発環境構築.md`（mise 推奨化）
- `.claude/settings.json`（権限追加 + ソート）
