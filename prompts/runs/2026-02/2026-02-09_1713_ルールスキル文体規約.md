# ルール・スキルファイルの文体規約

## 概要

Issue #326 に対応し、`.claude/rules/` と `.claude/skills/` の文体規約を定義するルールファイルを新規作成した。加えて、セッション中のユーザー指摘を受けて改善記録と改善プロセスの強化も実施した。

## 背景と目的

AI がルール・スキルファイルを書く/修正する際に解説調・語りかけ調になる傾向があった。「何をするか」を簡潔に記述すべきファイルに、変更経緯・哲学的解説・旧方式との対比が混入していた。

## 実施内容

1. 既存ルール・スキルファイル（17ファイル + 5スキル）の文体を分析し、問題パターンと良パターンを特定
2. `.claude/rules/rule-skill-writing.md` を新規作成（frontmatter で対象スコープ限定）
3. README のルール数を 17 → 18 に更新（ユーザー指摘による）
4. 改善記録「ハードコードされた数値の更新漏れ」を作成
5. 改善記録 README に「作成トリガー」セクションを追加

## 設計上の判断

### 配置場所: 専用ルールファイル vs docs.md

docs.md は全 Markdown 共通規約（frontmatter: `**/*.md`）。ルール・スキル固有の文体規約は別スコープで管理する方が適切と判断し、専用ファイルとした。frontmatter で `.claude/rules/**`, `.claude/skills/**` に限定することで、対象ファイル編集時にのみロードされる。

### 「改善の経緯」リンクの扱い

既存ルールファイルに多用されている `改善の経緯: [リンク](...)` パターンを評価。1行の簡潔なリンクはトレーサビリティとして有用なため許容とし、散文的な説明のみ NG とした。

## 判断ログ

特筆すべき判断なし。

## 成果物

| 種類 | ファイル |
|------|---------|
| ルールファイル（新規） | `.claude/rules/rule-skill-writing.md` |
| README 更新 | `README.md`（ルール数 17 → 18） |
| 改善記録 | `prompts/improvements/2026-02/2026-02-09_2134_ハードコードされた数値の更新漏れ.md` |
| 改善 README 更新 | `prompts/improvements/README.md`（作成トリガー追加） |
| 計画ファイル | `prompts/plans/326_writing-style-guidelines.md` |

## 議論の経緯

### README のルール数更新

ルールファイル作成・コミット後、ユーザーから「README にルール数が書かれていた気がする」と指摘。確認したところ「17 のルールファイル」とハードコードされており、18 に更新した。

### 改善記録の作成トリガー

ユーザーから「ユーザーが何か指摘して、それが正だった場合、それ自体が改善対象になりそう」という指摘があった。これを受けて改善記録 README に「作成トリガー」セクションを追加。ユーザーはさらに「本当は Want（AI が指摘される前に気づく）の形が理想」と補足。現在の対策（トリガー条件の明示化）は How であり、Want を直接実現するものではないが、フィードバックループとして間接的に寄与する位置づけ。

## 学んだこと

- ドキュメント内のハードコードされた数値は変更時に陳腐化しやすい構造的リスクがある
- ユーザーの正当な指摘は、個別の事象だけでなくメタパターン（プロセスの穴）を示唆する

## 次のステップ

- PR を Ready for Review にする（ユーザー承認済み）
- force push が必要（rebase 後）
