# コンポーネントビジュアルポリッシュ

Issue: #628（Epic #445 Story 7）
ブランチ: `feature/628-component-visual-polish`
PR: #631

## 概要

#627（カラーパレット刷新）と #612（フォント導入）で整えたデザイン基盤の上に、コンポーネントレベルのビジュアルポリッシュを実施した。Badge、テーブル、カード、フォームの4カテゴリにわたり、15 ファイルの CSS クラスを統一した。

## 実施内容

### Phase 1: 旧パレット排除 + Badge ポリッシュ

- Badge.elm に `border` クラスを追加し、`px-2.5` → `px-2`（4px グリッド準拠）
- 旧 Tailwind カラー（`gray-*`, `green-*`, `red-*`）を全てプロジェクトパレット（`secondary-*`, `success-*`, `error-*`）に移行
- 全 Badge colorClass に `border-{color}-{shade}` を追加（7 ファイル 16 箇所）
- `info-200` が @theme に未定義のため `info-300` を使用（styles.css L93 で定義確認済み）

### Phase 2: テーブルの統一

- User/List.elm をベースラインとして、Task/List.elm と Workflow/List.elm のテーブルスタイルを統一
- thead: `border-b border-secondary-100` → `bg-secondary-50`
- th: `text-sm font-medium` → `text-xs font-medium uppercase tracking-wider`
- tbody: `divide-y divide-secondary-200 bg-white` 追加
- tr: `border-b border-secondary-100` → `hover:bg-secondary-50 transition-colors`
- ラッパーに `rounded-lg border border-secondary-200` 追加

### Phase 3: KPI カード + セクションカード

- KPI カード（Home.elm）に `border border-secondary-200 shadow-sm` 追加
- セクションカードに `shadow-sm` 追加（User/Detail, Workflow/Detail, Task/Detail）
- ボーダー色を `secondary-100` → `secondary-200` に統一
- 入れ子カードは shadow なし（視覚的階層の維持）

### Phase 4: フォームスタイル統一 + 余白グリッド

- FormField.elm の `focus:` → `focus-visible:ring-2 focus-visible:` 移行 + `outline-none` 追加
- Main.elm サイドバーナビの `py-2.5` → `py-2`（4px グリッド準拠）
- Workflow/List.elm フィルタセレクトの統一（`rounded-lg`, `border-secondary-300`, `py-2`）

### Phase 5: デザインガイドライン更新

- styles.css のコメントにテーブル、バッジ、フォーム入力、セクションカードのパターンを追記

### テスト更新

- FormFieldTest.elm: `focus:` → `focus-visible:` の期待値更新
- AdminUserTest.elm: statusToBadge のボーダー色追加
- WorkflowInstanceTest.elm: statusToCssClass / stepStatusToCssClass のパレット移行 + ボーダー色追加

## 判断ログ

- Badge の `py-0.5`（2px）は 4px グリッドから外れるが、バッジの行内要素として視覚的に適切な最小値であり、Tailwind UI でも標準的なため変更しない
- テーブルの既存ラッパー `div [ class "overflow-x-auto" ]` にクラスを追加する方式を採用（新規ラッパー作成ではなく）
- `info-300` の採用: `info-200` が @theme に未定義のため、定義済みの `info-300` を使用
- セクションカード vs 入れ子カードで shadow の有無を区別（視覚的階層の維持）
- Workflow/Detail.elm の viewResubmitSection は warning ボーダー/背景がセマンティックに意図的であるため変更しない

## 成果物

### コミット

1. `#628 WIP: Polish component visuals` — 空コミット（Draft PR 用）
2. `#628 Polish badges with borders and migrate legacy color palette` — Phase 1
3. `#628 Unify table styles across list pages to User/List baseline` — Phase 2
4. `#628 Add shadow-sm to section cards and unify border colors` — Phase 3
5. `#628 Unify form focus rings to focus-visible and align spacing to 4px grid` — Phase 4
6. `#628 Document table, badge, form, and card patterns in design guidelines` — Phase 5
7. `#628 Update test expectations for new badge borders and focus-visible classes` — テスト更新
8. `#628 Add implementation plan for component visual polish` — 計画ファイル

### 変更ファイル（18 ファイル）

プロダクションコード: 15 ファイル
テスト: 3 ファイル
計画: 1 ファイル
