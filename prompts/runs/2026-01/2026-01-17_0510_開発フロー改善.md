# 開発フロー改善

## 概要

PR #43 のレビュー指摘を受けて、Issue 駆動開発の手順書を改善した。
フロー順序の見直しと実装計画フォーマットの追加により、「暗黙知ゼロ」の理念をさらに強化した。

## 背景と目的

PR #43（設計ファースト開発フロー導入）のレビューで以下の問題が判明した：

1. ADR へのリンクパスが誤っていた（既存の問題）
2. 開発フローの順序が不適切（設計 → ブランチ作成 になっていた）
3. 実装計画のフォーマットが不明確で、Claude Code が再現困難

## 実施内容

### 1. ADR リンクパスの修正

`docs/60_手順書/04_開発フロー/01_Issue駆動開発.md` の ADR リンクを修正。

```markdown
# 修正前
../../04_ADR/012_Issue駆動開発の採用.md

# 修正後
../../70_ADR/012_Issue駆動開発の採用.md
```

### 2. 開発フロー順序の修正

設計フェーズで詳細設計書や OpenAPI を更新する場合、コミットするためのブランチが必要。
フローを以下のように修正した。

```
# 修正前
Issue 作成 → 設計 → ブランチ作成 → 実装

# 修正後
Issue 作成 → ブランチ作成 → 設計 → 実装
```

### 3. 設計成果物のコミットステップ追加

「3.4 設計成果物のコミット」セクションを追加し、設計と実装を分けてコミットする意図を明確化。

```markdown
#### 3.4 設計成果物のコミット

設計フェーズで作成・更新したドキュメントをコミットする。

設計と実装を分けてコミットすることで:
- 設計レビューを先に受けられる
- 実装中に設計変更があった場合、差分が明確になる
```

### 4. 実装計画フォーマットの追加

「3.3 実装計画作成」にフォーマット例、Phase 分割の基準、参考例（Issue #34）を追加。

これにより Claude Code が Issue #34 のような詳細な実装計画を立てられるようになった。

## 成果物

### コミット

- `c73cbce` 設計ファースト開発フローを導入（PR #43 マージ）

### 更新ファイル

- `docs/60_手順書/04_開発フロー/01_Issue駆動開発.md`

## 設計判断と実装解説

### なぜブランチ作成を設計の前に移動したか

**問題:** 設計フェーズで詳細設計書や OpenAPI を更新するが、コミットするためのブランチがない。

**解決策:** フロー順序を「Issue → ブランチ作成 → 設計 → 実装」に変更。

**メリット:**
- 設計成果物をコミットできる
- 設計レビューを実装前に受けられる
- Git のベストプラクティスに沿っている

### なぜ実装計画のフォーマットを明示したか

**問題:** 手順書に「フェーズ分割（依存順に）」「各フェーズのテストリスト」と書いてあっても、具体的なフォーマットがなければ Claude Code は Issue #34 のような実装計画を立てられない。

**解決策:**
1. フォーマット例を追加（マークダウン形式）
2. Phase 分割の基準を明記（依存順、TDD 開発フローへのリンク）
3. 参考例として Issue #34 をリンク

**「暗黙知ゼロ」の観点:** 手順書を読むだけで、AI エージェントが再現可能な状態にする。

## 議論の経緯

### 開発フロー順序の見直し

ユーザーから、設計時にもコミットが必要なのでブランチ作成が先ではないかという指摘があった。これを受けてフロー順序を修正した。

### AI 再現性の確認

現状の手順書を読めば Claude Code が Issue #34 のような実装計画を立てられるようになっているか、という確認の問いがあった。この問いにより、フォーマット例や参考例が不足していることが判明し、追加対応を行った。

## 学んだこと

1. **フローの整合性:** 成果物を生成するステップと、それをコミットするステップの順序関係を意識する
2. **暗黙知の検出:** 「AI が再現できるか？」という問いで暗黙知を検出できる
3. **参考例の重要性:** フォーマット例だけでなく、実際の具体例へのリンクが理解を促進する

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-01-17 | 初版作成 |
