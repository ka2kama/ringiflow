# 2026-01-19_05 最新ベストプラクティス方針ルール追加

## 概要

プロジェクト横断的な「最新ベストプラクティス採用方針」を `.claude/rules/latest-practices.md` として明文化した。

## 背景と目的

Rust のモジュール構造として `mod.rs` ではなくファイル名によるモジュール定義を採用しているように、このプロジェクトではその時点での安定した最新のベストプラクティスを積極的に採用する方針がある。この方針を明文化し、AI エージェントが一貫した判断を行えるようにする。

## 実施内容

### 1. 方針の整理

「最新」には3つの異なる軸があることを整理:

1. 依存関係のバージョン: パッケージ・クレートのバージョン選定（LTS 優先、なければ stable）
2. 言語のイディオム・構文: `mod.rs` 不使用など言語レベルの推奨スタイル
3. ライブラリ・フレームワークの API: 非推奨 API を避け、最新の推奨 API を使用

### 2. ルールファイル構成の検討

2つの選択肢を比較:

- 横断的ルール（1ファイル）: 方針の意図を一箇所で説明できる
- 分散（既存ファイルに追記）: 各技術の文脈に近い場所に記載

「学習効果の最大化」という理念に沿って、方針を一箇所で明確に説明できる横断的ルールを採用した。

### 3. ルールファイルの作成と参照追加

- `.claude/rules/latest-practices.md` を新規作成
- `rust.md`、`frontend.md` から新ルールへの参照を追加

## 成果物

### 変更ファイル

| ファイル | 変更内容 |
|----------|----------|
| `.claude/rules/latest-practices.md` | 新規作成（横断的な方針） |
| `.claude/rules/rust.md` | 参照リンク追加 |
| `.claude/rules/frontend.md` | 参照セクション追加 |

### PR

- [#88 docs(rules): 最新ベストプラクティス採用方針のルールを追加](https://github.com/ka2kama/ringiflow/pull/88)

## 設計判断と実装解説

### ルールの階層設計

横断的ルールと技術固有ルールを分離する構造を採用した:

- 横断的ルール（`latest-practices.md`）: 「なぜ」と「方針」を説明
- 技術固有ルール（`rust.md` 等）: 「どう」を具体的に示す

この構造により、方針変更時は1箇所の更新で済み、各技術の詳細は個別に管理できる。DRY 原則をドキュメントに適用した形。

### 「最新」の3軸分離

バージョン、イディオム、API の3軸を明確に分離することで:

- 各軸で独立した判断が可能
- 判断基準が明確になり、一貫性が保てる
- 例を示しやすく、AI エージェントが適用しやすい

## 議論の経緯

### 最新ベストプラクティス採用の方針

ユーザーから、Rust のルールで `mod.rs` よりファイル名によるモジュール構造を採用しているように、構造や使用関数などはなるべくそのときの最新ベストプラクティスを採用したいという要望があった。

### ライブラリ API も対象

使用するライブラリ関数なども最新のものを使いたいという追加の要望があり、バージョン、イディオム、API の3軸で方針を整理することになった。

## 学んだこと

- 「最新」という概念は、バージョン・イディオム・API の3軸で整理すると明確になる
- 横断的な方針は一箇所で管理し、各技術固有ルールから参照する構造が保守しやすい
- ドキュメント規約（太字の使用基準など）を適用することで、読みやすさが向上する
