# prompts/runs/

このディレクトリには、AI エージェントとのセッション記録を保存する。

## 目的

セッションログはセッションの**証跡（audit trail）**である。Slack のチャット履歴や GitHub Discussion と同程度の軽量な記録。

- 記録が存在すること自体に価値がある（振り返り頻度とは独立）
- 何をやったか、どんな判断をしたかが後から追えれば十分
- 体系的な知識整理の場ではない（それは ADR、ナレッジベース、実装解説の役割）

## ディレクトリ構造

月ごとのサブディレクトリに整理する。

```
prompts/runs/
├── YYYY-MM/
│   ├── YYYY-MM-DD_HHMM_<トピック>.md
│   └── ...
└── README.md
```

例: `prompts/runs/2026-01/2026-01-17_0930_Phase0_Elm構築.md`

## ファイル命名規則

```
YYYY-MM-DD_HHMM_<トピック>.md
```

- `HHMM`: セッションの最初のコミット時刻（24時間形式、例: `0930`, `1415`）
- `<トピック>`: セッションの主題（例: `Phase0_Elm構築`）

時刻の取得方法:
```bash
git log --format="%ci" --reverse <branch> --not main | head -1
# 出力例: 2026-01-22 11:08:10 +0900 → HHMM = 1108
```

コミット時刻を使う理由:
- セッション開始時刻は曖昧で推測になりがち
- コミット時刻は `git log` で正確に取得・検証できる

## セッション記録の構成

| セクション | 内容 | 必須 |
|-----------|------|------|
| 概要 | セッションで何をしたかの要約 | ○ |
| 実施内容 | 具体的な作業内容 | ○ |
| 判断ログ | TDD Refactor 等で行った設計判断の証跡 | ○ |
| 成果物 | コミット、作成/更新ファイル | ○ |
| 議論の経緯 | ユーザーとの議論・質疑応答の要約 | 該当時のみ |

### 判断ログ

TDD Refactor フェーズが機能しているかの証跡として記録する。

形式はシンプルなリストで十分:

```markdown
## 判断ログ

- Refactor: ○○を trait に抽出した
- Refactor: 変更なし（Simple Design の問いに該当なし）
- Phase 3 で API 設計を見直した（理由: ○○）
```

該当する判断がない場合は「特筆すべき判断なし」と記載する。

### 議論の経緯

セッション中にどのような議論があったかを要約する。

記載するもの:
- 設計判断に至った議論
- 技術的な質問と回答
- 問題の発見と解決の経緯
- ユーザーからの指摘と対応

省略するもの:
- 単純な応答（「はい」「続けて」など）
- 定型作業の指示
- 技術的判断に関係しない雑談

## サニタイズ規則

セッションログは GitHub で公開されるため、以下の規則に従ってサニタイズする。

### 省略または伏せ字にする

| 対象 | 処理 |
|------|------|
| 認証情報（鍵、トークン、パスワード） | 完全に省略 |
| 個人を特定できる情報 | 省略または一般化 |
| 社内 URL、内部システム名 | 伏せ字（`[内部URL]`、`[システム名]`） |

### 表現・表記の校正

| 対象 | 処理 |
|------|------|
| カジュアルすぎる表現 | 丁寧語に整形 |
| 感情的・主観的な発言 | 技術的な内容に要約、または省略 |
| 誤字・脱字・表記揺れ | 修正・統一 |
