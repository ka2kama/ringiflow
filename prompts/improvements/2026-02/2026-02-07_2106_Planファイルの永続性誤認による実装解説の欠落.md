# Plan ファイルの永続性誤認による実装解説の欠落

## 事象

Issue #265（ConfirmDialog アクセシビリティ改善）の wrap-up で、実装解説の作成を「⚪（該当なし）」と判定した。判定理由は「Plan ファイルが詳細な設計解説を含んでいる」。

しかし Plan ファイルは `~/.claude/plans/` に保存されており、リポジトリ外の Claude Code ローカル作業ディレクトリである。Git 管理対象でなく、セッション間で保持される保証もない。

結果として、設計判断を伴う実装の解説がリポジトリに永続化されないまま wrap-up を完了しようとした。

## 原因分析

### 表層原因

Plan ファイルの保存場所と永続性を確認せずに、内容の充実度だけで判断した。

### 根本原因

ドキュメント作成の要否判断で、情報の「内容」と「所在・永続性」を区別していなかった。

「詳細な設計解説がある」（内容の評価）は正しいが、「それがリポジトリに残るか」（永続性の評価）という観点が欠落していた。

この問題は Plan ファイルに限らない。auto memory（`~/.claude/projects/.../memory/`）や会話コンテキスト等、Git 管理外の情報源全般に同じリスクがある。

## 対策

### 即時対策（実施済み）

実装解説を作成した。

### 恒久対策（実施済み）

wrap-up スキル（`.claude/skills/wrap-up/SKILL.md`）の Step 2（必要なドキュメントの特定）に、Git 管理外の情報源全般に対する注意書きを追加した。判定基準を「リポジトリ（Git 管理下）に形式知として残っているか」と明記。

Issue #280

## 次のアクション

- [x] 実装解説を作成（#265 セッションで実施）
- [x] wrap-up スキルに注意書きを追加（Issue #280）

## 後日対応

Plan ファイル自体を `prompts/plans/` に配置して git 管理下に置く対応を実施した。これにより Plan ファイルの永続性の問題は根本的に解消された。ただし、auto memory 等の他の Git 管理外情報源に対する注意は引き続き有効。

## 分類

- カテゴリ: 視点不足
- 失敗タイプ: 知識ギャップ
