# review-and-merge で base branch 同期確認をスキップ

## 事象

PR #515 の `/review-and-merge` 実行時、Step 1 の base branch 同期確認（`git fetch origin main && git log HEAD..origin/main`）を実施しなかった。PR 状態確認のみ行い、そのまま Step 3（レビューコメント取得）に進んだ。

結果、ユーザーが手動で rebase を指示する必要があった。

## 原因分析

### 表層的原因

Step 1 で PR 状態確認の JSON を取得した後、レビュー結果（APPROVED + Rules Check FAILURE）に注意が向き、同期確認を飛ばした。

### 根本原因

スキルの手順に「base branch 同期確認」のステップが記載されているが、実行を保証する仕組みがない。行動規範（「確認すること」）レベルにとどまっている。

既存の改善との関連:

| 改善記録 | 内容 | 本件との共通点 |
|---------|------|--------------|
| [review-and-merge で rebase 確認が遅い](2026-02-09_2106_review-and-mergeでrebase確認が遅い.md) | rebase 確認を Step 5 から Step 1 に移動した | 同期確認の位置は改善済みだが、実行漏れが再発 |

位置の改善（Step 5 → Step 1）だけでは不十分で、実行を強制する仕組みが必要。

## 対策

### 対策形式の検討

| 形式 | 案 | 評価 |
|------|-----|------|
| 行動規範 | 「必ず同期確認すること」 | 低（今回まさにこれで失敗） |
| 成果物要件 | Step 1 の出力に同期確認結果を含めることを必須とする | 中 |
| フロー組み込み | スキル内で `gh pr view` と `git fetch + log` を同一ステップとして記載し、分離不可能にする | 高 |

スキルの Step 1 で、PR 状態確認と base branch 同期確認を「一括実行」として明示的に結合する。現在は別セクションになっているため、読み飛ばしやすい。

Issue #518

## 分類

- カテゴリ: 知識-実行乖離
- 失敗タイプ: 実行ギャップ
