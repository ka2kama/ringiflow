# wrap-up 前に PR を Ready にした

## 事象

PR #332 の完了フローで、`/wrap-up`（セッションログ作成）を実行する前に `gh pr ready` を実行した。結果として、セッションログのコミットが Ready for Review 後に追加された。

PR 完了フローの手順:

```
1. 実装完了、just check-all 通過
2. 収束確認完了
3. Draft PR 作成
4. /wrap-up でドキュメント整備  ← スキップ
5. ユーザーに確認を求める
6. ユーザー承認後、gh pr ready  ← 先に実行
```

実際の実行順序: 1 → 2 → 3 → 5 → 6 → 4

## 原因分析

### 直接原因

continuation session（コンテキスト圧縮後の再開セッション）で、前セッションのサマリーに記載された「Pending tasks」リストの順序に従って作業を進めた。そのリストは PR 完了フローの手順書と異なる順序で記載されていた。

### 根本原因

PR 完了フローの手順書（CLAUDE.md）を参照せずに、サマリーのタスクリストを「手順」として使用した。サマリーは作業の状態を記録したものであり、手順の正確な順序を保証するものではない。

## 対策

既存ルール（CLAUDE.md の PR 完了フロー）は正しい順序を定義しており、新規の仕組みは不要。参照漏れの問題として記録する。

## 次のアクション

なし。既存の PR 完了フローの手順に従うことで防止できる。

## 分類

- カテゴリ: 参照漏れ
- 失敗タイプ: 実行ギャップ
