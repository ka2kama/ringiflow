# 命名規則を読んだが従わなかった

**発生日時**: 2026-01-29
**重大度**: 中
**カテゴリ**: AI エージェント運用

## 問題

改善記録ファイルの作成時、命名規則（`YYYY-MM-DD_HHMM_<トピック>.md`）の README.md を確認したにもかかわらず、`HHMM`（時刻）部分を省略してファイルを作成した。

- 規約: `YYYY-MM-DD_HHMM_<トピック>.md`
- 実際: `2026-01-29_E2E視点の完了基準欠如.md`（`HHMM` が欠落）

### 発見の経緯

ユーザーの指摘により発覚。AI エージェント側では気付かなかった。

## 原因分析

### 直接原因

README.md を読んで命名規則を把握した後、実際のファイルパスを組み立てる際に `HHMM` 部分を反映しなかった。

### 根本原因

**「規約を読む」と「規約に従う」の間にギャップがある。**

既存の改善記録との比較:

| 改善記録 | パターン |
|---------|---------|
| Issue 駆動開発フロー未遵守 | 手順書を読まずに実装を開始 |
| 今回 | 命名規則を読んだが従わなかった |

「読まなかった」は参照フローの追加で対策できるが、「読んだが従わなかった」はより根が深い。規約の参照と実際の適用の間に検証ステップがない。

### 構造的な問題

AI エージェントがファイルを作成する際のフローに、「規約との照合」ステップが存在しない:

```
現状: 規約を読む → ファイルを作成
あるべき姿: 規約を読む → ファイル名を組み立て → 規約と照合 → ファイルを作成
```

## 対策

### AI エージェントへの教訓

命名規則やフォーマット規約に従ってファイルを作成する際:

1. 規約を読む
2. 規約のテンプレートを引用し、各パートを埋める形でファイル名を組み立てる
3. 組み立てたファイル名が規約のパターンと一致するか照合する
4. ファイルを作成する

具体例（改善記録の場合）:

```
テンプレート: YYYY-MM-DD_HHMM_<トピック>.md
  YYYY-MM-DD = 2026-01-29
  HHMM       = 1304（現在時刻 or コミット時刻）
  トピック    = E2E視点の完了基準欠如
→ 結果: 2026-01-29_1304_E2E視点の完了基準欠如.md
→ 照合: YYYY-MM-DD ✅ _ HHMM ✅ _ トピック ✅ .md ✅
```

この「テンプレート展開 → 照合」のプロセスを踏めば、パーツの欠落を防止できる。

## 次のアクション

- [x] ファイル名を修正（`2026-01-29_1304_E2E視点の完了基準欠如.md`）
- [x] 手順書内のリンクを更新
- [x] `.claude/rules/docs.md` に照合プロセスを追加

## 関連

- [Issue 駆動開発フロー未遵守](./2026-01-27_2303_Issue駆動開発フロー未遵守.md) — 「読まなかった」パターン
