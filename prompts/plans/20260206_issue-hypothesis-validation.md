# Issue は仮説である — Issue 精査プロセスの導入

## Context

Issue 駆動開発フローにおいて、Issue は暗黙的に「正（source of truth）」として扱われている。Step 1「Issue を確認または作成」は存在確認にフォーカスし、Step 4「設計」は Issue の内容を前提とした実装設計を行う。Issue 自体の前提・スコープ・Want の妥当性を検証するプロセスが欠落している。

ユーザーの洞察: 「Issue は別に正ではなく、それ自体が精査・検討対象である」

この原則を形式知化し、フローに組み込む。

## 変更方針

Issue 駆動開発フローに「Issue 精査」を追加し、問題解決フレームワークの適用範囲を Issue 着手時にも拡張する。

## 対象ファイル

| # | ファイル | 変更内容 |
|---|---------|---------|
| 1 | `docs/04_手順書/04_開発フロー/01_Issue駆動開発.md` | 概要に前提を追加、Step 1 に精査プロセスを追加、Mermaid 図を更新 |
| 2 | `.claude/rules/problem-solving.md` | 適用場面セクションを追加（Issue 着手時を明記） |
| 3 | `CLAUDE.md` | 簡略フローの Step 1 に精査を反映 |
| 4 | `prompts/improvements/2026-02/` | 改善記録を作成 |

## 対象外

- ADR の作成（技術選定ではなくプロセス原則の追加。改善記録で十分）
- TDD 開発フロー（Issue 精査は TDD の前段階であり、影響しない）
- zoom-rhythm.md（設計ブラッシュアップループは Issue 精査の後段階。直接の変更なし）

## 変更詳細

### 1. Issue 駆動開発.md

**A. 概要セクション（L3-8 付近）**

「タスクを Issue として管理し〜」の後に、前提を追加:

```markdown
前提: Issue は仮説であり、精査・検討対象である。Issue に書かれた内容を無批判に「正」として受け入れず、着手前に前提・スコープ・完了基準の妥当性を検証する。
```

**B. Mermaid 図（L20-31）**

```
A["Issue 作成"] → ...
```
を
```
A["Issue 確認・精査"] → ...
```
に変更。

**C. Step 1 に精査サブセクション追加（L33-77 の後）**

既存の Step 1 の末尾に「既存 Issue の精査」サブセクションを追加。

精査の観点:

| 観点 | 問い |
|------|------|
| Want の確認 | この Issue が解決しようとしている本質的なニーズは何か？ |
| How への偏り | Issue が特定の解決策を前提にしていないか？ |
| 完了基準の妥当性 | 完了基準は Want を満たしているか？ |
| 暗黙の仮定 | Issue が前提としている仮定は正しいか？ |
| スコープの適切さ | 過大/過小ではないか？別の分割がありえないか？ |

精査の結果、Issue の修正が必要な場合は修正してから次のステップに進む。

**D. 変更履歴に追記**

### 2. problem-solving.md

**冒頭の適用場面を拡張（L3 付近）**

現在:
```
問題や指摘を受けたとき、すぐに修正案を出さない。まず腰を据えて考える。
```

変更後: 適用場面を明示するセクションを追加。

```markdown
## 適用場面

このフレームワークは以下の場面で適用する:

- 問題や指摘を受けたとき
- Issue に着手するとき — Issue 自体を「仮説」として検証する
- 設計判断を行うとき

Issue は正（source of truth）ではない。Issue に書かれた前提・スコープ・完了基準を、このフレームワークで検証してから実装に入る。
```

### 3. CLAUDE.md

**Issue 駆動開発セクションの簡略フロー（L384 付近）**

現在:
```
1. Issue を確認または作成
```

変更後:
```
1. Issue を確認または作成し、前提を精査する
```

### 4. 改善記録

`prompts/improvements/2026-02/2026-02-06_HHMM_Issueを正として扱う暗黙の前提.md` を作成。

内容:
- 事象: Issue 駆動開発フローが Issue を暗黙的に「正」として扱っていた
- 根本原因: フローが Issue の存在確認と内容検証を区別していなかった
- 対策: 概要に前提を追加、Step 1 に精査プロセスを追加、問題解決フレームワークの適用範囲を拡張
- 関連: Issue 駆動開発手順書、問題解決フレームワーク

HHMM はコミット時に確定する。

## 検証方法

- 変更後の 4 ファイル間でクロスリファレンスが整合していることを確認
- Issue 駆動開発フローの Mermaid 図がレンダリング可能であることを確認
- 改善記録が README.md のテンプレートに準拠していることを確認

## ブラッシュアップループの記録

| ループ | きっかけ | 調査内容 | 結果 |
|-------|---------|---------|------|
| 1回目 | 初版完成 → スコープ・既存ドキュメントとの整合性確認 | zoom-rhythm.md、TDD フロー、CLAUDE.md の参照箇所を確認 | CLAUDE.md の簡略フロー更新を追加。zoom-rhythm.md と TDD フローは変更不要と判断（対象外に明記） |
| 2回目 | 改善記録の要否検討 | 改善記録 README のフォーマット、最近の記録（Want と How の混同）を確認 | プロセスの暗黙の前提に関する洞察であり、改善記録として記録する価値があると判断。ADR は不要（技術選定ではない） |

## 収束確認（設計・計画）

| # | 観点 | 判定 | 確認内容 |
|---|------|------|---------|
| 1 | 網羅性 | OK | Issue 駆動開発.md、problem-solving.md、CLAUDE.md、改善記録の 4 ファイルを特定。他の参照箇所（zoom-rhythm.md、TDD フロー）は影響なしを確認 |
| 2 | 曖昧さ排除 | OK | 各ファイルの変更箇所を行番号付きで特定。精査の観点を表で明示 |
| 3 | 設計判断の完結性 | OK | ADR 不要の判断理由を記載。Issue 精査を独立ステップにせず Step 1 に統合する判断理由: フロー図のシンプルさ維持、概念的に「確認」に含まれる |
| 4 | スコープ境界 | OK | 対象 4 ファイルと対象外 3 点を明記 |
| 5 | 技術的前提 | OK | Mermaid flowchart のノードラベル変更は既存構文と同一形式 |
| 6 | 既存ドキュメント整合 | OK | 問題解決フレームワークの Want（品質の追求）と整合。Issue が仮説であるという原則は、設計フェーズの収束確認（zoom-rhythm.md）とも矛盾しない |
