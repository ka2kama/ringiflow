# 機能仕様書（Functional Specification）

## この文書群について

機能仕様書は、RingiFlow の各機能を**ユーザーの視点**から記述する。「ユーザーが何をできるか」「どのように振る舞うか」を、技術的な実装詳細なしに定義する。

### ドキュメント階層における位置づけ

```
01_コア要件（ビジネス要件・機能ID・非機能要件）
    ↓ ユーザー視点で詳細化
機能仕様書（本文書群）
    ↓ 技術的に実現
02_基本設計書 / 03_詳細設計書
```

- コア要件: 「何を作るか」のビジネスルール（機能 ID、優先度、制約条件）
- 機能仕様書: 「ユーザーから見てどう動くか」の振る舞い（画面、操作、状態遷移）
- 設計書: 「技術的にどう実現するか」の実装（API、DB、アーキテクチャ）

→ 意思決定の記録: [ADR-040: 機能仕様書の導入](../../05_ADR/040_機能仕様書の導入.md)

### 含めるもの

| カテゴリ | 具体的内容 |
|---------|-----------|
| ユースケース・シナリオ | 具体的なペルソナとユーザーストーリー |
| 画面・操作フロー | ユーザーが何を見て、何を操作するか |
| 入出力 | フォームの項目、表示されるデータ |
| バリデーション | 入力制約とエラーメッセージ |
| 状態遷移 | ユーザーから見えるステータスの変化 |
| 権限 | 誰が何をできるか（ロール別） |
| エラーケース | ユーザーに表示されるエラーと対処法 |

### 除外するもの

| カテゴリ | 参照先 |
|---------|--------|
| API エンドポイント設計 | `03_詳細設計書/03_API設計.md` |
| データベーススキーマ | `03_詳細設計書/02_データベース設計.md` |
| アーキテクチャ | `02_基本設計書/` |
| パフォーマンス要件（数値） | `01_要件定義書/01_コア要件.md` CORE-05 |
| 実装言語固有の話 | `03_詳細設計書/05_実装ガイドライン.md` |

## テンプレート構造

各機能仕様書は以下の構造に従う。

```
# [機能名] 機能仕様書

## 1. 概要
## 2. シナリオ
## 3. 画面・操作フロー
## 4. 機能詳細
## 5. 状態遷移
## 6. 権限
## 7. 非ゴール（対象外）
## 8. 未解決事項
## 9. 関連ドキュメント
```

各セクションの狙い:
- 概要: この機能の目的と対象ユーザーを把握する
- シナリオ: 具体的なペルソナを通じて「なぜこの機能が必要か」を理解する
- 画面・操作フロー: ユーザーの操作の全体像を視覚的に把握する
- 機能詳細: 入力項目、バリデーション、エラーケースを網羅する
- 状態遷移: ステータスの変化ルールを正確に把握する
- 権限: 誰が何をできるかを一覧する
- 非ゴール: スコープ外を明示し、誤解を防ぐ
- 未解決事項: 未決定の事項を可視化する

## 読む順序

1. [01_ワークフロー管理.md](01_ワークフロー管理.md) — ワークフローの申請・承認・管理
2. [04_ワークフローデザイナー.md](04_ワークフローデザイナー.md) — ワークフロー定義の GUI 作成・編集・公開
3. [05_通知機能.md](05_通知機能.md) — ワークフロー進行のメール通知
4. [06_ドキュメント管理.md](06_ドキュメント管理.md) — ファイルアップロード・フォルダ管理

## 参照規格

- ISO/IEC/IEEE 29148:2018 — 要件エンジニアリングのプロセスと仕様書テンプレート
- Joel Spolsky, "Painless Functional Specifications" (2000) — シナリオ駆動の記述スタイル
