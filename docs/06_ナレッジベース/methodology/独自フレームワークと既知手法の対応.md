# 独自フレームワークと既知手法の対応

## 概要

ringiflow で独自に構築した問題解決フレームワークや開発プロセスと、対応する既知の方法論・学術的フレームワークの関係を整理する。

独自フレームワークは実践から帰納的に構築されたものだが、多くの既知手法と共通する構造を持っている。既知手法を知ることで「なぜ効くのか」の理論的裏付けが得られ、関連文献へのアクセス（検索可能性）が向上する。

## 対応関係の全体像

```mermaid
flowchart LR
    subgraph ringiflow["ringiflow 独自フレームワーク"]
        PS["problem-solving.md<br/>Want → To-Be → As-Is<br/>→ Gap → Root Cause → Solution"]
        ZR["zoom-rhythm.md<br/>理想駆動 + 往復リズム"]
        PI["pre-implementation.md<br/>ゲート条件方式"]
        ID["Issue 駆動 + Phase 分割 + TDD"]
        DPL["設計原則レンズ（コード設計）<br/>問い + 手がかり"]
        OP["操作パス起点のテスト設計"]
        QS["品質戦略<br/>Validation & Verification"]
    end

    subgraph known["既知手法"]
        GA["Gap Analysis"]
        A3["A3 Thinking"]
        FW["5 Whys"]
        INT["Interest（Fisher & Ury）"]
        OODA["OODA Loop（Boyd）"]
        DL["Double-Loop Learning（Argyris）"]
        RP["Reflective Practice（Schön）"]
        DbC["Design by Contract（Meyer）"]
        NC["nano-cycle（Uncle Bob）"]
        SDD["Spec-Driven Development"]
        VV["V&V（Boehm / IEEE 1012）"]
        SD["Four Rules of Simple Design（Beck）"]
        SOLID["SOLID 原則（Martin）"]
        MISR["Making Illegal States<br/>Unrepresentable（Minsky）"]
        PDV["Parse, don't validate（King）"]
        NH["Nielsen's Heuristics"]
        WCAG["WCAG 2.1 POUR"]
        CRAP["CRAP Principles (Williams)"]
        BDD["BDD（Dan North）"]
        ATDD["ATDD（Uncle Bob）"]
        CUC["Use Cases（Cockburn）"]
    end

    PS --> GA
    PS --> A3
    PS --> FW
    PS --> INT
    ZR --> OODA
    ZR --> DL
    ZR --> RP
    PI --> DbC
    ID --> NC
    ID --> SDD
    ID --> NH
    ID --> WCAG
    ID --> CRAP
    DPL --> SD
    DPL --> SOLID
    DPL --> MISR
    DPL --> PDV
    OP --> BDD
    OP --> ATDD
    OP --> CUC
    QS --> VV
```

## problem-solving.md と既知手法

### ギャップ分析（Gap Analysis）

現状（As-Is）と理想状態（To-Be）の差分を特定し、解消策を導く手法。経営戦略、組織開発、IT プロジェクトマネジメントで広く使われる。

ringiflow の対応: フレームワークのステップ 2-4（To-Be → As-Is → ギャップ分析）が直接対応する。

### A3 Thinking（トヨタ生産方式）

A3 用紙1枚に「問題 → 現状 → 目標 → 原因分析 → 対策 → 実行計画」を記載する思考法。トヨタの問題解決文化の中核であり、データ駆動の意思決定と構造化コミュニケーションを重視する。

ringiflow の対応: 6ステップのフレームワーク全体が A3 Thinking の構造と対応する。

参考文献: Sobek, D. K. & Smalley, A. (2008) "Understanding A3 Thinking"

### なぜなぜ分析（5 Whys）

「なぜ？」を繰り返し問うことで根本原因に到達する手法。豊田佐吉が考案し、トヨタ生産方式の一部として確立された。

ringiflow の対応: ステップ 5（根本原因）が対応する。

注意: 5 Whys は単独では因果の飛躍を起こしやすい弱点がある。ringiflow ではギャップ分析で構造化した後に根本原因を探るため、この弱点を補完している。

### Want と Interest（Fisher & Ury）

Fisher & Ury の著書『Getting to Yes（ハーバード流交渉術）』で提唱された概念。Position（立場・主張）の奥にある本当の関心事を Interest と呼ぶ。

ringiflow の「Want」との関係: 最も近い既知概念。「How にこだわりすぎると、別の領域で同じ問題が再発する」という問題意識は、Position と Interest の区別そのもの。

関連概念:
- Job to be Done（Christensen）: 顧客が本当に達成したいこと
- Desired Outcome（Outcome-Driven Innovation）: 成果物ではなく達成したい成果

### ringiflow の独自性

| 要素 | 既知手法に存在するか | ringiflow 独自の追加 |
|------|---------------------|---------------------|
| To-Be / As-Is / Gap | ギャップ分析 | — |
| 根本原因の追究 | 5 Whys, A3 Thinking | — |
| Want の位置づけ | Interest（交渉学）に類似 | プロジェクト理念レベルへの固定、How との明示的区別 |
| 手段の目的化防止 | 部分的（Interest / Position） | 表による How の列挙と Want との対応付け |
| 複数手法の統合 | 個別に存在 | ギャップ分析 + 5 Whys + Interest を一つのフレームワークに統合 |

## zoom-rhythm.md と既知手法

### OODA ループ（Boyd）

Observe（観察）→ Orient（方向づけ）→ Decide（決定）→ Act（行動）のループ。米空軍大佐 John Boyd が提唱した意思決定モデル。

ringiflow の対応: 「往復のリズム」全体が OODA に対応する。俯瞰 = Observe + Orient、局所作業 = Decide + Act。

違い: OODA は意思決定の速度を重視するが、ringiflow は品質収束を重視する。

### ダブルループ学習（Argyris & Schön）

シングルループ学習（行動の修正）に加え、前提や目標自体を見直すダブルループ学習。Chris Argyris と Donald Schön が 1970 年代に提唱した。

ringiflow の対応:
- シングルループ = As-Is を To-Be に近づける通常の作業
- ダブルループ = To-Be 自体の更新（前提の見直し）

zoom-rhythm.md では To-Be の更新条件を明示し、暗黙の変更を禁止することで、シングルループとダブルループを構造的に区別している。

参考文献: Argyris, C. (1977) "Double Loop Learning in Organizations", Harvard Business Review

### リフレクティブ・プラクティス（Schön）

実践の中での省察（reflection-in-action）と実践後の省察（reflection-on-action）。Donald Schön が 1983 年に提唱した。

ringiflow の対応:
- reflection-in-action = 「いつ視点を上げるか」の表（実践中のトリガー）
- reflection-on-action = 収束確認チェックリスト（実践後の検証）

参考文献: Schön, D. A. (1983) "The Reflective Practitioner"

### ringiflow の独自性

| 要素 | 既知手法に存在するか | ringiflow 独自の追加 |
|------|---------------------|---------------------|
| 観察と行動の往復 | OODA ループ | 明示的な高度メタファ（俯瞰 / 局所） |
| 前提の見直し | ダブルループ学習 | To-Be 更新の条件と禁止事項の形式知化 |
| 実践中の省察 | リフレクティブ・プラクティス | トリガーの表による形式知化 |
| 二次元ギャップ | — | マイナス→ゼロ（欠陥除去）とゼロ→プラス（品質向上）の区別 |
| 収束の定義 | — | To-Be = As-Is でギャップゼロという明確な完了基準 |
| 二つの砦 | — | 設計段階と品質ゲートの二段構えによる品質保証 |

## pre-implementation.md と既知手法

### Design by Contract（Bertrand Meyer）

Bertrand Meyer が 1986 年に提唱し、Eiffel 言語で実装した設計手法。モジュール間の契約を前提条件（precondition）、事後条件（postcondition）、不変条件（invariant）で定義する。前提条件が満たされなければ処理に入らないという原則が中核。

ringiflow の対応: `pre-implementation.md` のゲート条件方式が precondition に対応する。Phase の実装に入る前に、確認事項（型・パターン・ライブラリ API）を Read/Grep で検証しなければならないという宣言的なルール。

| DbC の概念 | ringiflow の対応 |
|-----------|-----------------|
| Precondition | ゲート条件（Phase の確認事項） |
| "満たされなければ進まない" | 確認事項を実施せずに Phase の実装を開始することの禁止 |
| 契約は宣言的 | 計画ファイルは仕様であり、実施状態の追跡は行わない |

ringiflow の独自性: DbC はコードレベルの実行時検証だが、ringiflow はこれを開発プロセスのルールとして適用している。また、追跡メカニズム（チェックボックス等）を意図的に持たず、Read/Grep ツールの実行そのものを証跡とする点が異なる。

参考文献: Meyer, B. (1988) "Object-Oriented Software Construction"

→ 詳細: [pre-implementation.md](../../../.claude/rules/pre-implementation.md)

## Issue 駆動 + Phase 分割 + TDD と既知手法

### nano-cycle と二層の Red モデル（Robert C. Martin）

Robert C. Martin は『Clean Craftsmanship』(2021) で、TDD の Red-Green-Refactor サイクル内にさらに小さなサイクル（nano-cycle）が存在することを示した。特に Red フェーズでは、テストを書く → コンパイルエラーを解消する → テスト失敗を確認する、という段階的なフィードバックループが回る。

ringiflow の対応: TDD 開発フローの「二層の Red モデル」が対応する。

| 既知概念 | ringiflow での表現 |
|---------|-------------------|
| nano-cycle（Red 内の小サイクル） | 二層の Red モデル（Red: compile → Red: test failure） |
| Compiler-Driven Development | コンパイルエラー解消の原則（`todo!()` / `Debug.todo`） |
| "Write the test you wish you had"（GOOS） | Red フェーズの「テストを1つだけ書く」 |

関連概念:
- Compiler-Driven Development: 静的型付き言語の TDD で一般的な考え方。コンパイラのエラーメッセージを設計のフィードバックとして活用する
- "Write the test you wish you had": Freeman & Pryce『Growing Object-Oriented Software, Guided by Tests』(2009) の教え。まず理想的なテストを書き、そこからインターフェースを導出する

ringiflow の独自性: 静的型付き言語（Rust / Elm）に特化した形で二層モデルを明示化し、各層で「書くもの / 書かないもの」を具体的に定義している。これは nano-cycle の概念をプロジェクトの技術スタックに合わせて具体化したもの。

→ 詳細: [TDD 開発フロー > 二層の Red モデル](../../04_手順書/04_開発フロー/02_TDD開発フロー.md#二層の-red-モデル)

### Spec-Driven Development（GitHub Spec Kit）

GitHub が 2025 年後半に OSS 公開した開発手法。Spec Kit v0.1.0（2026-01-28）で 8 つのコマンドから成るパイプラインに拡張された。仕様を中心に開発を進め、AI エージェントのスラッシュコマンドとしてパッケージ化している点が特徴。

#### パイプラインの対応関係

| SDD コマンド | 役割 | ringiflow の対応 |
|-------------|------|-----------------|
| Constitution | プロジェクトの不変原則を定義 | CLAUDE.md + `.claude/rules/` |
| Specify | Intent → 仕様化（WHAT と WHY） | 要件定義書 + Issue 精査（Want 分析） |
| Clarify | 仕様の曖昧さを質問で解消 | 設計ブラッシュアップループ |
| Plan | 技術計画（アーキテクチャ、API 契約） | plan mode + 計画ファイル |
| Checklist | ドメインカバレッジ検証 | 品質チェックリスト |
| Tasks | 具体的タスクへの分解 | Phase 分割 + テストリスト |
| Analyze | 全成果物の一貫性検証 | 収束確認チェックリスト |
| Implement | タスクに基づく実装 | TDD 開発フロー |

初回調査時（2026-02-06）は基本パイプライン（Intent → Spec → Plan → Tasks → Implement → PR）のみだったが、v0.1.0 で Constitution・Clarify・Checklist・Analyze が追加された。これら 4 つは ringiflow が既に独自に構築していた仕組みと強い対応を持つ。

#### 3つの実装レベル（Bockeler）

Martin Fowler のシリーズで Birgitta Bockeler が定義した 3 段階:

| レベル | 名称 | 仕様の位置づけ |
|--------|------|---------------|
| 1 | Spec-First | 仕様を書いて実装するが、実装後に仕様は放棄 |
| 2 | Spec-Anchored | 仕様が維持され、機能進化のアンカーとなる |
| 3 | Spec-as-Source | 仕様のみ人間が編集。コードは完全に生成 |

ringiflow は Spec-Anchored レベルに位置する。要件定義書・設計書・OpenAPI が維持され、実装のアンカーとして機能する。Spec-as-Source は学習効果の最大化（理念1）と相反するため、意識的に選択しない。

#### ringiflow の独自性

Clarify と Analyze の対応箇所で特に差異が大きい:

- Clarify: SDD はアドホックな質問形式。ringiflow のブラッシュアップループは「ギャップ発見の観点」を体系化し、欠陥の発見（マイナス→ゼロ）と品質の向上（ゼロ→プラス）を区別する
- Analyze: SDD は全成果物の一括クロスチェック。ringiflow はフェーズ別（設計・実装・テスト・横断検証）にチェックリストを分化

| ringiflow 独自の仕組み | SDD に対応がないもの |
|----------------------|---------------------|
| 二つの砦（設計段階 + 品質ゲート） | 品質保証の二段構え |
| 設計原則レンズ | TDD Refactor での設計品質評価 |
| 問題解決フレームワーク | Want → To-Be → As-Is の構造的分析 |
| 品質確認セクション | PR 本文への収束確認結果の明示 |
| 実装前の確認 | 型・API・パターンの事前検証 |

| SDD 独自の仕組み | ringiflow に対応がないもの |
|-----------------|--------------------------|
| Skills 化（スラッシュコマンド） | ワークフローステップの AI コマンド化 |
| Handoffs | コマンド間の機械可読な引き継ぎ |
| Extension System | 外部ツールとのプラグイン統合 |

#### 関連: Harness Engineering（Fowler, 2026-02）

同じ Fowler シリーズで提唱された AI エージェントの品質維持フレームワーク。SDD と補完的に位置づけられる。

| 要素 | 内容 | ringiflow の対応 |
|------|------|-----------------|
| Context Engineering | コードベース内のナレッジ強化 | CLAUDE.md、rules、手順書、ナレッジベース |
| Architectural Constraints | 決定論的リンター・構造テスト | `just check-all`、lefthook |
| Garbage Collection | 定期エージェント実行で不整合検出 | `/assess`（月次）、`/retro`（週次） |

参考リソース:
- [GitHub Spec Kit](https://github.com/github/spec-kit)
- [Fowler: Understanding SDD tools](https://martinfowler.com/articles/exploring-gen-ai/sdd-3-tools.html)
- [Fowler: Context Engineering for Coding Agents](https://martinfowler.com/articles/exploring-gen-ai/context-engineering-coding-agents.html)
- [Fowler: Harness Engineering](https://martinfowler.com/articles/exploring-gen-ai/harness-engineering.html)

### BDD / ATDD / Cockburn Use Cases と操作パス起点のテスト設計

#### BDD（Behavior-Driven Development）

Dan North が 2006 年に提唱した開発手法。テストを「振る舞いの仕様」として記述する。Given-When-Then 形式で、ユーザーの視点からシステムの振る舞いを定義する。

ringiflow の対応: TDD 開発フローの「パターン2: Given-When-Then（AAA）」がテストの構造として採用。操作パスの列挙では、Given-When-Then を思考モデルとして活用し、操作パスの分類（正常系・準正常系・異常系）を導出する。

| BDD の概念 | ringiflow での表現 |
|-----------|-------------------|
| Given-When-Then | Arrange-Act-Assert（テストの構造） |
| Feature / Scenario | 操作パスの列挙 |
| 振る舞いの仕様 | テストリスト（Phase 完了時の仕様の文書化） |

ringiflow の独自性: BDD のツール（Cucumber 等）は採用せず、Given-When-Then を思考モデルとしてのみ活用。テストコードは Rust / Elm のネイティブテストフレームワークで記述する。

参考文献: North, D. (2006) "Introducing BDD"

#### ATDD（Acceptance Test-Driven Development）

Robert C. Martin が提唱した、受け入れテストを起点とする開発手法。ビジネス側が定義した受け入れ基準からテストを導出し、そのテストが通るように実装する。ATDD では「二重ストリーム」が回る。外側のループ（受け入れテスト）と内側のループ（ユニットテスト TDD）が同時に進行する。

ringiflow の対応: 操作パスの列挙とテスト設計の方向性が ATDD の二重ストリームに対応する。

| ATDD の概念 | ringiflow での表現 |
|------------|-------------------|
| 受け入れテスト（外側ループ） | 操作パスから導出した E2E / API テスト |
| ユニットテスト TDD（内側ループ） | Phase 内の TDD サイクル |
| 二重ストリーム | トップダウン設計 × ボトムアップ実装 |

ringiflow の独自性: ATDD の二重ストリームを「テスト設計の方向性」として明示化。設計はトップダウン（操作パス → テスト層の配置 → テストリスト）、実装はボトムアップ（ユニット → API → E2E）で行うことを構造的に区別している。

参考文献: Martin, R. C. (2021) "Clean Craftsmanship" — Chapter on ATDD

#### Cockburn Use Cases

Alistair Cockburn が 2001 年の著書で体系化したユースケース記述法。Main Success Scenario（MSS）と Extensions（拡張シナリオ）で操作の流れを記述する。

ringiflow の対応: 操作パスの列挙が MSS + Extensions の簡略版に対応する。

| Cockburn の概念 | ringiflow での表現 |
|----------------|-------------------|
| Main Success Scenario（MSS） | 正常系の操作パス |
| Extensions（分岐） | 準正常系・異常系の操作パス |
| Actor | ユーザー / API クライアント |

ringiflow の独自性: Cockburn の完全なユースケース記述（プリコンディション、ポストコンディション、トリガー等）ではなく、MSS と Extensions のみを簡略化して採用。過度な形式を避けつつ、操作パスの網羅性を確保する。

参考文献: Cockburn, A. (2001) "Writing Effective Use Cases"

→ 詳細: [TDD 開発フロー > 操作パスの列挙](../../04_手順書/04_開発フロー/02_TDD開発フロー.md#操作パスの列挙テストリスト作成の前に)

## 設計原則レンズ（コード設計）と既知手法

### Kent Beck の Four Rules of Simple Design

Kent Beck が Extreme Programming (2000) で提唱した Simple Design の 4 つのルール。Martin Fowler が優先順位付きリストとして広め、J.B. Rainsberger が 2013 年にさらに整理した。

| ルール | 優先順 | ringiflow のレンズ |
|--------|--------|-------------------|
| Passes the tests | 1（前提） | TDD サイクルの Red → Green |
| Reveals intention | 2 | 意図の明確さ |
| No duplication（DRY） | 3 | 重複の排除 |
| Fewest elements | 4 | 要素の最小性 |

ringiflow の対応: 「毎 Refactor」の 3 レンズが Four Rules の 2-4 に 1:1 で対応する。ルール 1（テストが通る）は TDD サイクルの前提として Green フェーズで保証されるため、Refactor レンズには含まれない。

参考文献: Beck, K. (2000) "Extreme Programming Explained"; Rainsberger, J.B. (2013) "The Four Elements of Simple Design"

### SOLID 原則（SRP・DIP）

Robert C. Martin が 2000 年代に体系化した 5 つのオブジェクト指向設計原則のうち、ringiflow のレンズでは SRP と DIP を採用。

| SOLID | 内容 | ringiflow のレンズ |
|-------|------|-------------------|
| SRP（Single Responsibility Principle） | クラスの変更理由は1つだけ | 単一責務レンズ |
| DIP（Dependency Inversion Principle） | 上位モジュールは下位モジュールに依存しない | 依存方向レンズ |

ringiflow の対応: SRP は「変更理由」をレイヤー別に具体化している（Handler: API 契約、UseCase: ビジネスルール、Repository: DB スキーマ、Domain Entity: ドメインモデル）。DIP は `apps → domain → shared`, `apps → infra → shared` の一方向依存と `Arc<dyn Trait>` による DI で実現している。

OCP・LSP・ISP を採用しない理由: OCP（開放閉鎖）と LSP（リスコフ置換）は継承ベースの設計に強く結びつき、Rust/Elm の ADT 中心の設計とは適用場面が異なる。ISP（インターフェース分離）は Repository trait の粒度で自然に実現されている。

参考文献: Martin, R. C. (2003) "Agile Software Development, Principles, Patterns, and Practices"

### Making Illegal States Unrepresentable

Yaron Minsky が 2011 年に OCaml コミュニティで提唱した設計原則。不正な状態を型レベルで表現不可能にすることで、実行時エラーではなくコンパイルエラーで問題を検出する。Richard Feldman が 2016 年に Elm コミュニティで "Making Impossible States Impossible" として再提唱し、フロントエンド開発にも広まった。

ringiflow の対応: 「型の活用」レンズが対応する。3 つの ADR で系統的に適用している:
- Newtype パターン（[ADR-016](../../05_ADR/016_プリミティブ型のNewtype化方針.md)）: プリミティブ型の取り違えを型で防止
- 型安全ステートマシン（[ADR-054](../../05_ADR/054_型安全ステートマシンパターンの標準化.md)）: 状態依存フィールドを ADT で分離
- 構造的強制（[ADR-051](../../05_ADR/051_トランザクションコンテキストによる構造的強制.md)）: 引数の型でルール遵守を強制

参考文献: Minsky, Y. (2011) "Effective ML"; Feldman, R. (2016) "Making Impossible States Impossible" (Elm Conf)

### Parse, don't validate

Alexis King が 2019 年のブログ記事で提唱した設計原則。バリデーション（検証して結果を捨てる）ではなく、パース（検証して結果を型に埋め込む）を行うことで、検証済みの情報を型で保持する。

ringiflow の対応: 「型の活用」レンズの境界での型変換と不変条件の保護が対応する:
- ドメイン型の `new()` でバリデーションし、検証済みの値を Newtype に格納する（例: `Email::new(value)` は形式検証済みの `Email` を返す）
- 外部入力（JSON リクエスト、DB Row）を境界で早期にドメイン型に変換し、内部では型が検証済みを保証する

"Parse, don't validate" は "Making Illegal States Unrepresentable" の実践的な適用ガイドラインとして位置づけられる。

参考文献: King, A. (2019) "Parse, don't validate" (blog post)

### ringiflow の独自性

| 要素 | 既知手法に存在するか | ringiflow 独自の追加 |
|------|---------------------|---------------------|
| Simple Design の問い | Four Rules of Simple Design | 手がかりによる行動可能性の付与 |
| SRP・DIP | SOLID 原則 | レイヤーアーキテクチャとの接続（レイヤー別の変更理由、依存方向の具体化） |
| 不正状態の防止 | Making Illegal States Unrepresentable | 3 つの ADR（016, 051, 054）による系統的な適用パターンの確立 |
| 境界での型変換 | Parse, don't validate | ドメイン型の `new()` コンストラクタとレイヤー境界での `From` 実装の組み合わせ |

→ 詳細: [TDD 開発フロー > 設計原則レンズ](../../04_手順書/04_開発フロー/02_TDD開発フロー.md#設計原則レンズ)

## 設計原則レンズ（UI/UX）と既知手法

### Nielsen's 10 Usability Heuristics

Jakob Nielsen が 1994 年に発表（2024 年更新）したユーザビリティ評価の 10 原則。UI デザインのヒューリスティック評価における事実上の標準。

ringiflow の対応: TDD 開発フローの「UI/UX レンズ（フロントエンド変更時）」が対応する。10 原則のうち、コードレベルで即座に確認できる 6 つを選択的に採用。

| Nielsen のヒューリスティック | ringiflow の UI/UX レンズ |
|---------------------------|--------------------------|
| H1: Visibility of System Status（システム状態の可視性） | 状態の網羅性（RemoteData 全状態 + 空データ） |
| H3: User Control and Freedom（ユーザーコントロール） | 破壊的操作の防御（ConfirmDialog） |
| H4: Consistency and Standards（一貫性と標準） | デザイントークン準拠、共有コンポーネント活用 |
| H5: Error Prevention（エラー予防） | 破壊的操作の防御 |
| H8: Aesthetic and Minimalist Design（ミニマルデザイン） | 視覚的階層 |
| H9: Help Users Recover from Errors（エラー回復支援） | エラーのユーザビリティ |

不採用のヒューリスティクス（H2, H6, H7, H10）は、コードレベルでの即時確認が難しいか、現フェーズの品質特性（操作性は Phase 2 以降）に該当するため除外した。

### WCAG 2.1 POUR 原則

W3C が策定した Web コンテンツのアクセシビリティガイドライン。4 つの原則（Perceivable, Operable, Understandable, Robust）で構成される。

ringiflow の対応: UI/UX レンズの「アクセシビリティ」が Perceivable（セマンティック HTML、ARIA）と Operable（キーボード操作、focus-visible）に対応する。

### ゲシュタルト心理学（視覚的階層）

Wertheimer (1923) が提唱した知覚の法則群。近接、類似、閉合、共通領域などの原則で、人間がどのように視覚情報をグループ化して認識するかを説明する。

ringiflow の対応: UI/UX レンズの「視覚的階層」が対応する。タイポグラフィ階層（[デザインガイドライン](../../03_詳細設計書/13_デザインガイドライン.md)）と近接によるグルーピングを問う。

### CRAP 原則（Robin Williams）

Robin Williams が 2004 年の著書 "The Non-Designer's Design Book" で提唱した 4 つのデザイン原則。非デザイナーがビジュアルデザインを改善するための実践的なフレームワーク。

| CRAP | 内容 | ガイドライン原則 | ゲシュタルト原則 |
|------|------|----------------|----------------|
| Contrast | 異なる要素は明確に差別化する | 最小の強調 | 図と地、類似の逆用 |
| Repetition | 同じ要素は同じ見た目にする | 一貫性 | 類似の法則 |
| Alignment | 要素を視覚的に整列させる | 意図的な余白 | 連続の法則、対称性 |
| Proximity | 関連する要素を近くに配置する | 意図的な余白 | 近接の法則 |

ringiflow の対応:
- 守り（欠陥検出）: Repetition → デザイントークン準拠、共有コンポーネント活用（毎 Refactor）
- 攻め（品質向上）: Contrast・Alignment・Proximity → デザイン品質向上レンズ（ページ/コンポーネント完成時）

CRAP とゲシュタルト原則は相補的: CRAP はデザイン実践の手法（How）、ゲシュタルトは人間の知覚心理の法則（Why）。

位置づけ: CRAP は非デザイナー向けの入門フレームワークであり、単独ではモダン UI の品質評価には不十分。ringiflow では以下の 4 層で UI/UX 品質をカバーしている。

| 層 | フレームワーク | ringiflow のレンズ |
|----|--------------|-------------------|
| 視覚構造 | CRAP + ゲシュタルト | デザイン品質向上レンズ（攻め） |
| ユーザビリティ | Nielsen's 10 Heuristics | 状態の網羅性、破壊的操作の防御 等（守り） |
| アクセシビリティ | WCAG 2.1 POUR | アクセシビリティレンズ（守り） |
| 実装基盤 | Design Tokens | デザイントークン準拠、共有コンポーネント活用（守り） |

### ringiflow の独自性

| 要素 | 既知手法に存在するか | ringiflow 独自の追加 |
|------|---------------------|---------------------|
| ユーザビリティ評価 | Nielsen's Heuristics | コードレベルの問いへの変換（TDD Refactor で適用可能な形式） |
| アクセシビリティ | WCAG 2.1 | 品質チェックリストとの 1:1 対応による二段構え |
| 視覚的階層 | ゲシュタルト原則 | デザインガイドラインとの紐づけ |
| 条件付き適用 | — | フロントエンド変更時のみ適用（プロセスの重さの最小化） |
| コード設計レンズとの対応 | — | コード設計レンズ（意図の明確さ → 視覚的階層、重複の排除 → 共有コンポーネント活用）との概念的対応を明示 |
| デザイン品質の攻めレンズ | CRAP 原則の C/A/P | TDD Refactor の問い形式への変換、守り/攻めの構造的区別 |
| R の分離配置 | — | Repetition を守り、C/A/P を攻めに分離。既存レンズとの重複を回避 |

→ 詳細: [TDD 開発フロー > UI/UX レンズ](../../04_手順書/04_開発フロー/02_TDD開発フロー.md#uiux-レンズフロントエンド変更時)

## 品質戦略と既知手法

### V&V（Verification & Validation）

Boehm（1984）が広めた品質保証の基本概念。Validation = "Are we building the right product?"、Verification = "Are we building the product right?" の2つの問いで品質活動を区別する。IEEE 1012 で体系化されている。

ringiflow の対応: CLAUDE.md の品質戦略を V&V の2層構造で整理している。

| ringiflow の層 | V&V | 仕組み |
|---------------|-----|--------|
| Validation | Validation | Issue 精査、問題解決フレームワーク |
| Verification（守りと攻め） | Verification | 設計レビュー、TDD、品質チェックリスト |

→ 詳細: [V&V](V&V.md)

## まとめ

独自フレームワークは「再発明」ではあるが、実践から帰納的に導いたことにより:

- プロジェクトの文脈に最適化されている
- 具体的な適用方法（チェックリスト、トリガー条件、禁止事項）が実践知として蓄積されている
- 複数の既知手法を統合した形になっている（例: ギャップ分析 + 5 Whys + Interest の統合）

既知手法を知ることの価値:

- 「なぜ効くのか」の理論的裏付けが得られる
- 関連文献へのアクセスが容易になる（検索可能性の向上）
- 既知手法が持つ観点で自分たちのフレームワークを評価・改善できる

## 関連リソース

- Fisher, R. & Ury, W. (1981) "Getting to Yes: Negotiating Agreement Without Giving In"
- Sobek, D. K. & Smalley, A. (2008) "Understanding A3 Thinking"
- Argyris, C. (1977) "Double Loop Learning in Organizations", Harvard Business Review
- Schön, D. A. (1983) "The Reflective Practitioner"
- Boyd, J. (1996) "The Essence of Winning and Losing" (OODA Loop)
- Christensen, C. M. (2016) "Competing Against Luck" (Jobs to Be Done)
- Meyer, B. (1988) "Object-Oriented Software Construction" (Design by Contract)
- Beck, K. (2000) "Extreme Programming Explained" (Four Rules of Simple Design)
- Rainsberger, J.B. (2013) "The Four Elements of Simple Design"
- Martin, R. C. (2003) "Agile Software Development, Principles, Patterns, and Practices" (SOLID 原則)
- Minsky, Y. (2011) "Effective ML" (Making Illegal States Unrepresentable)
- Feldman, R. (2016) "Making Impossible States Impossible" (Elm Conf)
- King, A. (2019) "Parse, don't validate"
- Martin, R. C. (2021) "Clean Craftsmanship" (nano-cycle)
- Freeman, S. & Pryce, N. (2009) "Growing Object-Oriented Software, Guided by Tests"
- North, D. (2006) "Introducing BDD"
- Cockburn, A. (2001) "Writing Effective Use Cases"
- [GitHub Spec Kit](https://github.com/github/spec-kit)
- [Fowler: Understanding SDD tools](https://martinfowler.com/articles/exploring-gen-ai/sdd-3-tools.html)
- [Fowler: Context Engineering for Coding Agents](https://martinfowler.com/articles/exploring-gen-ai/context-engineering-coding-agents.html)
- [Fowler: Harness Engineering](https://martinfowler.com/articles/exploring-gen-ai/harness-engineering.html)
- Nielsen, J. (1994, 2024 更新) "10 Usability Heuristics for User Interface Design", Nielsen Norman Group
- W3C (2018) "Web Content Accessibility Guidelines (WCAG) 2.1"
- Wertheimer, M. (1923) "Laws of Organization in Perceptual Forms" (ゲシュタルト原則)
- Williams, R. (2004) "The Non-Designer's Design Book" (CRAP 原則)

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-24 | 設計原則レンズ（コード設計）セクションを追加。Four Rules of Simple Design, SOLID (SRP/DIP), Making Illegal States Unrepresentable, Parse don't validate を記載（#891） |
| 2026-02-21 | BDD / ATDD / Cockburn Use Cases セクションを追加。操作パス起点のテスト設計との対応を記載（#765） |
| 2026-02-21 | Design by Contract セクションを追加。ゲート条件方式との対応を記載（#748） |
| 2026-02-18 | CRAP 原則セクションを追加。守り/攻めの分離構造を記載（#653） |
| 2026-02-18 | SDD セクションを大幅更新。パイプライン詳細対応、3 実装レベル、Harness Engineering を追加 |
| 2026-02-18 | 設計原則レンズ（UI/UX）セクションを追加。Nielsen's Heuristics, WCAG 2.1 POUR, ゲシュタルト原則（#644） |
| 2026-02-18 | nano-cycle と二層の Red モデルセクションを追加（#637） |
| 2026-02-11 | V&V（品質戦略）セクションを追加（#438） |
| 2026-02-07 | 初版作成（#271） |
