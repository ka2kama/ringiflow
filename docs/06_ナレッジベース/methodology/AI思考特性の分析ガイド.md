# AI 思考特性の分析ガイド

## 概要

AI エージェントの思考パターン（構造的特性）を定期的に分析し、プロセス改善にフィードバックするためのガイド。

改善記録（`prompts/improvements/`）の分類データとセッションログ（`prompts/runs/`）の判断ログを入力とし、AI の「クセ」の傾向変化と対策の有効性を評価する。

## 目的

- AI 駆動開発の品質改善サイクルをデータ駆動で回す
- 「なんとなく良くなっている」ではなく「どこが弱く、何を改善すれば効果が高いか」を判断できる状態にする
- ルールの追加・改善・引退（→ #302）の判断材料を提供する

## 分析のトリガー

以下のいずれかで分析を実施する:

- 改善記録が 10件 追加されたとき
- 月次（月末の wrap-up 時に併せて実施）

## 分析の入力データ

| データソース | 場所 | 内容 |
|-------------|------|------|
| 改善記録 | `prompts/improvements/` | カテゴリ、失敗タイプ、対策、検証結果 |
| セッションログの判断ログ | `prompts/runs/` | 実装中の判断ポイント（種別、判断、背景） |

## 分析手順

### 1. カテゴリ別集計

改善記録の分類データを集計する。

```markdown
| カテゴリ | 前回 | 今回 | 増減 |
|---------|------|------|------|
| 参照漏れ | 8 | ? | |
| 単一パス検証 | 7 | ? | |
| 即座の対策 | 3 | ? | |
| 視点不足 | 3 | ? | |
| コンテキスト引きずり | 2 | ? | |
| 知識-実行乖離 | 3 | ? | |
```

確認するポイント:
- 特定のカテゴリに集中していないか
- 前回の分析から改善したカテゴリはあるか
- 新しいカテゴリの追加が必要か

### 2. 失敗タイプ別集計

```markdown
| 失敗タイプ | 前回 | 今回 | 増減 |
|-----------|------|------|------|
| 知識ギャップ | ? | ? | |
| 実行ギャップ | ? | ? | |
| プロセスギャップ | ? | ? | |
```

確認するポイント:
- 知識ギャップ → ドキュメント/ナレッジベースの拡充が必要
- 実行ギャップ → 行動規範の成果物要件化が必要
- プロセスギャップ → プロセス自体の見直しが必要

### 3. 時系列トレンド

改善記録を月別に件数を集計し、傾向を確認する。

```markdown
| 月 | 件数 | 主なカテゴリ |
|----|------|-------------|
| 2026-01 | 11 | 参照漏れ、視点不足 |
| 2026-02 | 22 | 単一パス検証、知識-実行乖離 |
```

確認するポイント:
- 件数の増減は改善の指標にならない（観測精度の向上で増加する場合がある）
- カテゴリの偏りの変化に着目する
- 特定カテゴリの減少はその領域の対策が効いている証拠

### 4. 対策の有効性評価

改善記録の検証セクションを集約し、対策の有効性を評価する。

```markdown
| 対策の形式 | 実施済み | 効果あり | 効果なし/再発 |
|-----------|---------|---------|-------------|
| 行動規範（〜すべき） | ? | ? | ? |
| 成果物要件（〜が記載されていること） | ? | ? | ? |
| フローへの組み込み | ? | ? | ? |
| 判定テスト/基準の明示 | ? | ? | ? |
```

確認するポイント:
- 対策の形式ごとの有効性に差があるか
- 再発した対策には共通の構造的問題があるか

### 5. 判断ログからのパターン抽出

セッションログの判断ログを種別ごとに集約する。

```markdown
| 種別 | 件数 | 特徴的なパターン |
|------|------|----------------|
| 設計修正 | ? | |
| 軌道修正 | ? | |
| ルール適用 | ? | |
| 発見 | ? | |
```

確認するポイント:
- 「ルール適用」の件数はルールの有効性の正のフィードバック
- 「軌道修正」が多い場合は設計段階の品質に改善余地がある
- 「発見」は新しいナレッジベースエントリの候補

## 分析結果の活用

### ルール改善へのフィードバック

分析結果に基づき、以下のアクションを検討する:

| 分析結果 | アクション |
|---------|----------|
| 特定カテゴリの増加 | そのカテゴリに対応するルールの強化、または新しい構造的強制の導入 |
| 特定カテゴリの減少 | 対策が効いている。ルールの簡素化を検討（→ #302） |
| 対策形式の有効性差 | 効果の低い形式（行動規範）を効果の高い形式（成果物要件）に変換 |
| 判断ログの「ルール適用」増加 | ルールが現場で機能している証拠。ルール維持の根拠 |

### #302（ルール引退メカニズム）への入力

定期分析の結果は、ルール引退の判断材料として使用する:

- 対応するカテゴリの再発がゼロ → ルールの簡素化・統合を検討
- 参照されなくなったルール → 引退または他のルールへの統合を検討

## 分析結果の記録

分析結果は改善記録の月別ディレクトリに記録する:

```
prompts/improvements/YYYY-MM/YYYY-MM-DD_HHMM_定期分析.md
```

## 既知手法との関連

| 本ガイドの要素 | 対応する既知手法 |
|--------------|-----------------|
| カテゴリ別集計・トレンド分析 | SPC（統計的工程管理） — 工程の変動を監視し、異常を検出する |
| 対策の有効性評価 | PDCA サイクル — Plan（対策設計）→ Do（実行）→ Check（検証）→ Act（改善） |
| 判断ログからのパターン抽出 | リフレクティブ・プラクティス（Schön）の reflection-on-action |

SPC との関係:
- 製造業では工程の品質を管理図で監視する。本ガイドでは AI エージェントの「思考工程」を分類データで監視する
- SPC の「工程が安定しているか」に対応するのが「カテゴリの偏りの変化」
- ただし、サンプルサイズが小さいため統計的有意性は求めない。傾向の把握が目的

参考文献:
- Wheeler, D. J. (2000) "Understanding Variation: The Key to Managing Chaos"
- Schön, D. A. (1983) "The Reflective Practitioner"

## 関連

- [改善記録の分類体系](../../../prompts/improvements/README.md#分類)
- [セッションログの判断ログ](../../../prompts/runs/README.md#判断ログの記載ルール)
- [独自フレームワークと既知手法の対応](独自フレームワークと既知手法の対応.md)
- #302 ルール・ドキュメントの定期棚卸し
- #315 AI駆動開発プロセスの観測可能性向上
