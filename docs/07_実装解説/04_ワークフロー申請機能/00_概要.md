# ワークフロー申請機能 - 実装解説

## 概要

ワークフロー定義から申請案件を作成し、承認フローを実行する機能を実装する。

### 対応 Issue

[#35 ワークフロー申請機能](https://github.com/ka2kama/ringiflow/issues/35)

## Phase 構成

| Phase | 内容 | 状態 | 解説 |
|-------|------|------|------|
| Phase 1 | WorkflowDefinitionRepository | ✅ 完了 | [解説](./01_Phase1_WorkflowDefinitionRepository.md) |
| Phase 2 | WorkflowInstanceRepository | ✅ 完了 | [解説](./02_Phase2_WorkflowInstanceRepository.md) |
| Phase 3 | WorkflowStepRepository | ✅ 完了 | [解説](./03_Phase3_WorkflowStepRepository.md) |
| Phase 4 | ワークフロー作成ユースケース | ✅ 完了 | [解説](./04_Phase4_WorkflowUseCase.md) |
| Phase 5 | Core Service API | ✅ 完了 | [解説](./05_Phase5_CoreServiceAPI.md) |
| Phase 6 | (Phase 5 に統合) | - | - |
| Phase 7 | BFF API | ✅ 完了 | [解説](./06_Phase7_BFFAPI.md) |
| - | 全体フロー | ✅ 完了 | [解説](./07_全体フロー.md) |
| Phase 8 | フロントエンド API クライアント | ✅ 完了 | [解説](./08_Phase8_フロントエンドAPIクライアント.md) |
| Phase 9 | 申請フォーム UI | ✅ 完了 | [解説](./09_Phase9_申請フォームUI.md) |
| Phase 10 | 申請一覧・詳細ページ | ✅ 完了 | [解説](./10_Phase10_申請一覧詳細ページ.md) |

## 設計書

- [実装ロードマップ](../../03_詳細設計書/00_実装ロードマップ.md)
- [データベース設計](../../03_詳細設計書/02_データベース設計.md)
- [ワークフロー申請フォーム UI 設計](../../03_詳細設計書/10_ワークフロー申請フォームUI設計.md)

## 学習ポイント

本実装で得られる学習効果：

### バックエンド（Rust）

1. **リポジトリパターンの実践**: トレイトとPostgreSQL実装の分離
2. **SQLx オフラインモード**: CI でのビルドを可能にするキャッシュ管理
3. **テスト配置戦略**: src/ vs tests/ の使い分け
4. **UPSERT 実装**: ON CONFLICT DO UPDATE の活用
5. **マルチテナント分離**: tenant_id による徹底したデータ分離

### フロントエンド（Elm）

6. **TEA パターン**: Model-Msg-Update-View の循環で副作用を分離
7. **Nested TEA**: Main.elm でサブページの状態・メッセージを統合
8. **RemoteData パターン**: 非同期データの状態を型で表現
9. **動的 UI 生成**: JSON 定義からフォーム UI を生成
10. **型安全なルーティング**: `Url.Parser` による URL パース
