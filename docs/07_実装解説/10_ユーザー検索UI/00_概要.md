# ユーザー検索 UI 実装解説

対応 Issue: [#203 承認者選択のユーザー検索 UI を実装する](https://github.com/ka2kama/ringiflow/issues/203)

## 概要

新規申請フォームの承認者選択を UUID 直接入力からオートコンプリート検索 UI に改善した。

## アーキテクチャ

```mermaid
sequenceDiagram
    participant UI as Elm UI
    participant BFF as BFF
    participant Core as Core Service
    participant DB as PostgreSQL

    UI->>BFF: GET /api/v1/users
    BFF->>Core: GET /internal/users?tenant_id=...
    Core->>DB: SELECT * FROM users WHERE tenant_id = ? AND status = 'active'
    DB-->>Core: ユーザー一覧
    Core-->>BFF: UserItemDto[]
    BFF-->>UI: UserItem[]

    Note over UI: フロントエンド側でフィルタリング
    UI->>UI: filterUsers("山田", users)
    UI->>UI: 候補リスト表示
    UI->>UI: ユーザー選択 → UUID を内部保持
```

## Phase 一覧

| Phase | コンポーネント | 内容 |
|-------|--------------|------|
| 1 | User ドメイン + DB | display\_number カラム追加、ドメインモデル拡張 |
| 2 | バックエンド API | UserRepository → Core Service → BFF のフルスタック API |
| 3 | フロントエンド | Elm でオートコンプリート検索 UI |

## 関連ドキュメント

- 設計書: [表示用 ID 設計](../../03_詳細設計書/12_表示用ID設計.md)
- 実装解説: [表示用 ID](../08_表示用ID/00_概要.md)
- OpenAPI: [openapi.yaml](../../openapi/openapi.yaml) の `/api/v1/users`
