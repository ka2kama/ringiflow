# E2E テスト突合表

要件定義（[CORE-12 セクション 12.6](../01_要件定義書/01_コア要件.md#126-e2e-テストシナリオ)）の E2E テストシナリオと Playwright テスト（`tests/e2e/tests/`）の対応関係。

計測日: 2026-02-23

## 対応表

| # | シナリオID | シナリオ名 | 優先度 | テストファイル | テスト件数 | 状態 |
|---|-----------|-----------|--------|-------------|-----------|------|
| 1 | E2E-001 | ログイン | 必須 | auth.setup.ts | 2 | カバー済み（API ログイン、管理者+一般ユーザー） |
| 2 | E2E-003 | ワークフロー申請 | 必須 | workflow.spec.ts | 2 | カバー済み |
| 3 | E2E-004 | 承認フロー | 必須 | approval.spec.ts | 3 | カバー済み（1段階+2段階承認） |
| 4 | E2E-005 | 却下フロー | 必須 | rejection.spec.ts | 1 | カバー済み |
| 5 | E2E-006 | 差し戻し | 必須 | request-changes.spec.ts | 1 | カバー済み（差し戻し→再申請→承認） |
| 6 | E2E-002 | SSO ログイン | 必須 | — | — | 未実装（機能未実装） |
| 7 | E2E-007 | ファイルアップロード | 必須 | — | — | 未実装（機能未実装） |
| 8 | E2E-008 | 検索 | 推奨 | — | — | 未実装（機能未実装） |
| 9 | E2E-009 | ユーザー管理 | 推奨 | user-management.spec.ts | 3 | カバー済み（作成・編集・無効化） |
| 10 | E2E-010 | ワークフローデザイナー | 推奨 | designer-workflow-flow.spec.ts | 1 | 部分カバー（定義作成→申請→承認フロー） |

## シナリオ外のテスト

要件定義のシナリオ一覧に含まれないが、実装済みのテスト。

| # | テストファイル | テスト件数 | 内容 |
|---|-------------|-----------|------|
| 1 | dashboard.spec.ts | 3 | ダッシュボード表示、KPI カード、クイックアクション |
| 2 | workflow-definition-management.spec.ts | 5 | 定義一覧閲覧、新規作成（Draft）、公開・アーカイブ、デザイナー検証・公開 |

## サマリー

| 指標 | 値 |
|------|-----|
| 全シナリオ数 | 10 |
| カバー済み | 6 (10 テスト + 2 セットアップ) |
| 部分カバー | 1 (1 テスト) |
| 未実装（機能未実装） | 3 |
| 未実装（機能実装済み） | 0 |
| クリティカルパス カバー率 | 71%（5/7 必須シナリオ） |

注: カバレッジ目標はクリティカルパス 100%（CORE-12）。SSO・ファイルアップロード等は機能自体が未実装のため、機能実装時に E2E テストを追加する。

## 更新履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-02-11 | 初版作成（#435）。#128 で導入した Playwright テストとの突合 |
| 2026-02-19 | #713 で E2E-004 拡張（2段階承認）、E2E-005（却下）、E2E-006（差し戻し→再申請）を追加。一般ユーザー認証セットアップ追加 |
| 2026-02-20 | #724 でワークフロー定義管理（一覧・作成・公開・アーカイブ）を追加 |
| 2026-02-21 | #727 でデザイナー定義ワークフローフロー（API 定義作成→申請→承認）を追加 |
| 2026-02-21 | #761 でデザイナー画面の検証・公開ボタンテストを追加 |
| 2026-02-23 | #780 で E2E-009 ユーザー管理（作成・編集・無効化）を追加 |
