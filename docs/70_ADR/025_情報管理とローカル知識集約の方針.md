# ADR-025: 情報管理とローカル知識集約の方針

## ステータス

承認済み

## コンテキスト

RingiFlow プロジェクトでは GitHub Projects、Issues、Pull Requests を使用した Issue 駆動開発を採用している（[ADR-012](012_Issue駆動開発の採用.md)）。

一方で、プロジェクトの理念として「一切の暗黙知を許容しない」という方針があり、知識はローカルのドキュメントに集約することを重視している。

この2つの方針の間に潜在的な矛盾がある:

1. GitHub Issues/PR 上の情報（議論、レビューコメント、進捗）は Web 上に散逸する
2. 検索性が低く、LLM（AI エージェント）からもアクセスしにくい
3. 進捗管理や完了条件も「知見」として価値があるが、GitHub 上にのみ残ると活用しにくい

これらを解決し、学習効果を最大化するための情報管理方針を定める必要がある。

## 検討した選択肢

### 選択肢 1: GitHub 情報の定期エクスポート

`gh` CLI を使って Issues/PR の内容を定期的にローカルにエクスポートする。

評価:
- 利点: 自動化可能、情報の欠落がない
- 欠点: JSON 形式で人間が読みにくい、整理されていない情報が大量に蓄積

### 選択肢 2: 完全ローカル化（GitHub Issues を使わない）

ローカルの TODO.md や Issue 管理ファイルで完結させる。

評価:
- 利点: 情報が一元化される
- 欠点: CI 連携等の利便性を失う、Issue 駆動開発の学習機会を失う

### 選択肢 3: ローカルファースト + GitHub は軽量に

GitHub を「ワークフロー管理ツール」として最小限に使い、知識・判断・学びはローカルに集約する。

評価:
- 利点: 両方のメリットを享受、振り返りによる学習効果
- 欠点: 振り返りの習慣化が必要

### 比較表

| 観点 | 定期エクスポート | 完全ローカル化 | ローカルファースト |
|------|-----------------|---------------|-------------------|
| 学習効果 | 低（未整理データ） | 中 | 高（振り返り促進） |
| CI 連携 | ○ | × | ○ |
| 検索性 | 低 | 高 | 高 |
| 運用負荷 | 低（自動） | 中 | 中（振り返り必要） |
| LLM フレンドリー | 低 | 高 | 高 |

## 決定

**選択肢 3: ローカルファースト + GitHub は軽量に を採用する。**

具体的な運用ルール:

### GitHub の役割（一時的・ワークフロー用）

- Issues: 作業の追跡と進捗管理
- PR: コードレビューと CI 連携
- Issue/PR 内での長い議論は避け、判断・学びはローカルに記録

### ローカルの役割（永続的・知識用）

| 学びの種類 | 記録先 |
|-----------|-------|
| 要件の背景・詳細 | 要件定義書（`docs/10_要件定義書/`） |
| 設計判断の理由 | ADR（`docs/70_ADR/`） |
| 実装の解説・学び | 実装解説（`docs/90_実装解説/`）、セッションログ |
| テスト仕様・追跡 | テスト（`docs/50_テスト/`） |
| 操作パターン | recipes（`prompts/recipes/`） |
| 技術知識 | ナレッジベース（`docs/80_ナレッジベース/`） |

### 振り返りの仕組み化

学習は「記録」ではなく「振り返り」から生まれる。以下の仕組みで振り返りを促進する:

1. Issue テンプレートに「完了条件」を必須化（ゴールの明確化）
2. Issue クローズ時に振り返りコメントを残す（予想 vs 実際、学び）
3. 重要な学びはローカルドキュメントに転記

### 振り返りコメントのフォーマット

Issue をクローズする際、以下を含むコメントを残す:

```markdown
## 振り返り

### 完了条件の検証
- [x] 条件1: 達成
- [x] 条件2: 達成

### 予想と違ったこと
（実装前の想定と異なった点）

### 学んだこと
（技術的な発見、設計上の気づき）

### 次に活かすこと
（同様のタスクで意識すべき点）
```

### 学びの転記基準

| 重要度 | 記録先 | 例 |
|--------|-------|-----|
| 高: 再利用可能 | ローカルドキュメント | 「この設計パターンは〇〇に有効」 |
| 中: プロジェクト固有 | Issue コメント + セッションログ | 「この API の仕様は〇〇」 |
| 低: 一時的 | Issue コメントのみ | 「ここのエラーメッセージが分かりにくい」 |

## 帰結

### 肯定的な影響

- 振り返りが習慣化され、学習効果が最大化される
- 知識がローカルに集約され、検索性・LLM フレンドリーが向上
- Issue 駆動開発のメリット（CI 連携、追跡性）を維持
- 完了条件の明記により、ゴールが曖昧なまま作業を始めることを防止

### 否定的な影響・トレードオフ

- Issue クローズ時に振り返りを書く手間が発生
  - 対策: 振り返りテンプレートを提供し、記載を簡略化
- 軽微な学びも記録しようとすると負担が増える
  - 対策: 重要度に応じた記録先の使い分けを明確化

### 関連ドキュメント

- 手順書: [Issue 駆動開発](../60_手順書/04_開発フロー/01_Issue駆動開発.md)
- 関連 ADR: [ADR-012: Issue 駆動開発の採用](012_Issue駆動開発の採用.md)
- Issue テンプレート: `.github/ISSUE_TEMPLATE/`
- セッションログ: [2026-01-27_2132_情報管理とローカル知識集約](../../prompts/runs/2026-01/2026-01-27_2132_情報管理とローカル知識集約.md)

---

## 変更履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-01-27 | 初版作成 |
